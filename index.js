/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={97:(t,r,a)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,p=!0,h=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();return p=t.done,t},e:function e(t){h=!0,u=t},f:function f(){try{p||null==a.return||a.return()}finally{if(h)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(t,r,a){t[r]=a.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",p=i.asyncIterator||"@@asyncIterator",h=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var u=r&&r.prototype instanceof Generator?r:Generator,p=Object.create(u.prototype),h=new Context(i||[]);return o(p,"_invoke",{value:makeInvokeMethod(t,a,h)}),p}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var y={};define(y,u,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(values([])));b&&b!==r&&a.call(b,u)&&(y=b);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(o,i,u,p){var h=tryCatch(t[o],t,i);if("throw"!==h.type){var d=h.arg,y=d.value;return y&&"object"==_typeof(y)&&a.call(y,"__await")?r.resolve(y.__await).then((function(t){invoke("next",t,u,p)}),(function(t){invoke("throw",t,u,p)})):r.resolve(y).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,p)}))}p(h.arg)}var i;o(this,"_invoke",{value:function value(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,o){invoke(t,a,r,o)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,a){var o="suspendedStart";return function(i,u){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw u;return doneResult()}for(a.method=i,a.arg=u;;){var p=a.delegate;if(p){var h=maybeInvokeDelegate(p,a);if(h){if(h===d)continue;return h}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===o)throw o="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o="executing";var y=tryCatch(t,r,a);if("normal"===y.type){if(o=a.done?"completed":"suspendedYield",y.arg===d)continue;return{value:y.arg,done:a.done}}"throw"===y.type&&(o="completed",a.method="throw",a.arg=y.arg)}}}function maybeInvokeDelegate(t,r){var a=r.method,o=t.iterator[a];if(void 0===o)return r.delegate=null,"throw"===a&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var i=tryCatch(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var u=i.arg;return u?u.done?(r[t.resultName]=u.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):u:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function next(){for(;++o<t.length;)if(a.call(t,o))return next.value=t[o],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(w,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,h,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,p,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,o,i,u){void 0===u&&(u=Promise);var p=new AsyncIterator(wrap(r,a,o,i),u);return t.isGeneratorFunction(a)?p:p.next().then((function(t){return t.done?t.value:p.next()}))},defineIteratorMethods(w),define(w,h,"Generator"),define(w,u,(function(){return this})),define(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),a=[];for(var o in r)a.push(o);return a.reverse(),function next(){for(;a.length;){var t=a.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,o){return u.type="throw",u.arg=t,r.next=a,o&&(r.method="next",r.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var p=a.call(i,"catchLoc"),h=a.call(i,"finallyLoc");if(p&&h){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(p){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var u=i;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var p=u?u.completion:{};return p.type=t,p.arg=r,u?(this.method="next",this.next=u.finallyLoc,d):this.complete(p)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var o=a.completion;if("throw"===o.type){var i=o.arg;resetTryEntry(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,a,o,i,u,p){try{var h=t[u](p),d=h.value}catch(t){return void a(t)}h.done?r(d):Promise.resolve(d).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var u=t.apply(r,a);function _next(t){asyncGeneratorStep(u,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,u=void 0,u=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var o=a.call(t,r||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(i,"string"),"symbol"===_typeof(u)?u:String(u)),o)}var i,u}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,a){var o=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(o){var i=Object.getOwnPropertyDescriptor(o,r);return i.get?i.get.call(arguments.length<3?t:a):i.value}},_get.apply(this,arguments)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,o=_getPrototypeOf(t);if(r){var i=_getPrototypeOf(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,a)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}a.d(r,{c:()=>T});var o=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(CompendiumConfig,FormApplication);var r,a,o=_createSuper(CompendiumConfig);function CompendiumConfig(){return function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,CompendiumConfig),o.call(this)}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}(CompendiumConfig,[{key:"APP_ID",get:function get(){return this.constructor.APP_ID}},{key:"SETTING_KEY",get:function get(){return this.constructor.SETTING_KEY}},{key:"getData",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,a,o,i,u,p,h,d,y,v,b,w,E,k;return _regeneratorRuntime().wrap((function _callee$(x){for(;;)switch(x.prev=x.next){case 0:for(t=game.settings.get(T,this.SETTING_KEY),r=Array.from(game.packs),a=[],o=0,i=r;o<i.length;o++)d=i[o],y=d.metadata.id,a.push({id:y,checked:null===(u=t[y])||void 0===u||u,name:d.metadata.label,package:null!==(p="system"===d.metadata.packageType?game.system.title:null===(h=game.modules.get(d.metadata.packageName))||void 0===h?void 0:h.title)&&void 0!==p?p:game.i18n.localize("PACKAGE.Type.world")});for(a.sort((function(t,r){return t.package.localeCompare(r.package)})),v={},b=0,w=a;b<w.length;b++)E=w[b],v[E.package]||(v[E.package]=[]),v[E.package].push(E);for(k in v)v[k].sort((function(t,r){return t.name.localeCompare(r.name)}));return x.abrupt("return",{compendiumsByPackage:v});case 9:case"end":return x.stop()}}),_callee,this)}))),function getData(){return a.apply(this,arguments)})},{key:"activateListeners",value:function activateListeners(t){var r;_get(_getPrototypeOf(CompendiumConfig.prototype),"activateListeners",this).call(this,t),(t=null!==(r=t[0])&&void 0!==r?r:t).querySelector("#check-all").addEventListener("click",(function(r){var a,o=_createForOfIteratorHelper(t.querySelectorAll("input[type=checkbox]"));try{for(o.s();!(a=o.n()).done;){a.value.checked=!0}}catch(t){o.e(t)}finally{o.f()}})),t.querySelector("#uncheck-all").addEventListener("click",(function(r){var a,o=_createForOfIteratorHelper(t.querySelectorAll("input[type=checkbox]"));try{for(o.s();!(a=o.n()).done;){a.value.checked=!1}}catch(t){o.e(t)}finally{o.f()}})),t.querySelectorAll(".check-all").forEach((function(t){t.addEventListener("click",(function(r){r.preventDefault();var a,o=_createForOfIteratorHelper(t.closest("fieldset").querySelectorAll("input[type=checkbox]"));try{for(o.s();!(a=o.n()).done;){a.value.checked=!0}}catch(t){o.e(t)}finally{o.f()}}))})),t.querySelectorAll(".uncheck-all").forEach((function(t){t.addEventListener("click",(function(r){r.preventDefault();var a,o=_createForOfIteratorHelper(t.closest("fieldset").querySelectorAll("input[type=checkbox]"));try{for(o.s();!(a=o.n()).done;){a.value.checked=!1}}catch(t){o.e(t)}finally{o.f()}}))}))}},{key:"_updateObject",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t,r){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",game.settings.set(T,this.SETTING_KEY,r));case 1:case"end":return t.stop()}}),_callee2,this)}))),function _updateObject(t,a){return r.apply(this,arguments)})}],[{key:"APP_ID",get:function get(){return this.name.split(/(?=[A-Z])/).join("-").toLowerCase()}},{key:"SETTING_KEY",get:function get(){return this.name.charAt(0).toLowerCase()+this.name.slice(1)}},{key:"defaultOptions",get:function get(){return mergeObject(_get(_getPrototypeOf(CompendiumConfig),"defaultOptions",this),{id:this.APP_ID,template:"modules/".concat(T,"/templates/").concat(this.APP_ID,".hbs"),popOut:!0,minimizable:!0,resizable:!0,width:800,title:game.i18n.localize("".concat(T,".settings.").concat(this.SETTING_KEY,".label")),closeOnSubmit:!0})}},{key:"register",value:function register(){game.settings.registerMenu(T,this.APP_ID,{name:game.i18n.localize("".concat(T,".settings.").concat(this.SETTING_KEY,".name")),label:game.i18n.localize("".concat(T,".settings.").concat(this.SETTING_KEY,".label")),hint:game.i18n.localize("".concat(T,".settings.").concat(this.SETTING_KEY,".hint")),icon:"fas fa-atlas",type:this,restricted:!0,scope:"world"}),game.settings.register(T,this.SETTING_KEY,{scope:"world",config:!1,default:{},type:Object})}}]),CompendiumConfig}(),i=a(575),u=a(934),p=a(83),h=a(411);function spotlight_typeof(t){return spotlight_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},spotlight_typeof(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var o,i,u,p,h=[],d=!0,y=!1;try{if(u=(a=a.call(t)).next,0===r){if(Object(a)!==a)return;d=!1}else for(;!(d=(o=u.call(a)).done)&&(h.push(o.value),h.length!==r);d=!0);}catch(t){y=!0,i=t}finally{try{if(!d&&null!=a.return&&(p=a.return(),Object(p)!==p))return}finally{if(y)throw i}}return h}}(t,r)||spotlight_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return spotlight_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||spotlight_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function spotlight_regeneratorRuntime(){spotlight_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(t,r,a){t[r]=a.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",p=i.asyncIterator||"@@asyncIterator",h=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var u=r&&r.prototype instanceof Generator?r:Generator,p=Object.create(u.prototype),h=new Context(i||[]);return o(p,"_invoke",{value:makeInvokeMethod(t,a,h)}),p}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var y={};define(y,u,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(values([])));b&&b!==r&&a.call(b,u)&&(y=b);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(o,i,u,p){var h=tryCatch(t[o],t,i);if("throw"!==h.type){var d=h.arg,y=d.value;return y&&"object"==spotlight_typeof(y)&&a.call(y,"__await")?r.resolve(y.__await).then((function(t){invoke("next",t,u,p)}),(function(t){invoke("throw",t,u,p)})):r.resolve(y).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,p)}))}p(h.arg)}var i;o(this,"_invoke",{value:function value(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,o){invoke(t,a,r,o)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,a){var o="suspendedStart";return function(i,u){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw u;return doneResult()}for(a.method=i,a.arg=u;;){var p=a.delegate;if(p){var h=maybeInvokeDelegate(p,a);if(h){if(h===d)continue;return h}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===o)throw o="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o="executing";var y=tryCatch(t,r,a);if("normal"===y.type){if(o=a.done?"completed":"suspendedYield",y.arg===d)continue;return{value:y.arg,done:a.done}}"throw"===y.type&&(o="completed",a.method="throw",a.arg=y.arg)}}}function maybeInvokeDelegate(t,r){var a=r.method,o=t.iterator[a];if(void 0===o)return r.delegate=null,"throw"===a&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var i=tryCatch(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var u=i.arg;return u?u.done?(r[t.resultName]=u.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):u:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function next(){for(;++o<t.length;)if(a.call(t,o))return next.value=t[o],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(w,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,h,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,p,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,o,i,u){void 0===u&&(u=Promise);var p=new AsyncIterator(wrap(r,a,o,i),u);return t.isGeneratorFunction(a)?p:p.next().then((function(t){return t.done?t.value:p.next()}))},defineIteratorMethods(w),define(w,h,"Generator"),define(w,u,(function(){return this})),define(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),a=[];for(var o in r)a.push(o);return a.reverse(),function next(){for(;a.length;){var t=a.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,o){return u.type="throw",u.arg=t,r.next=a,o&&(r.method="next",r.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var p=a.call(i,"catchLoc"),h=a.call(i,"finallyLoc");if(p&&h){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(p){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var u=i;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var p=u?u.completion:{};return p.type=t,p.arg=r,u?(this.method="next",this.next=u.finallyLoc,d):this.complete(p)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var o=a.completion;if("throw"===o.type){var i=o.arg;resetTryEntry(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},t}function spotlight_asyncGeneratorStep(t,r,a,o,i,u,p){try{var h=t[u](p),d=h.value}catch(t){return void a(t)}h.done?r(d):Promise.resolve(d).then(o,i)}function spotlight_asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var u=t.apply(r,a);function _next(t){spotlight_asyncGeneratorStep(u,o,i,_next,_throw,"next",t)}function _throw(t){spotlight_asyncGeneratorStep(u,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}function spotlight_createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=spotlight_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,p=!0,h=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();return p=t.done,t},e:function e(t){h=!0,u=t},f:function f(){try{p||null==a.return||a.return()}finally{if(h)throw u}}}}function spotlight_unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return spotlight_arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?spotlight_arrayLikeToArray(t,r):void 0}}function spotlight_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function spotlight_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function spotlight_defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,u=void 0,u=function spotlight_toPrimitive(t,r){if("object"!==spotlight_typeof(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var o=a.call(t,r||"default");if("object"!==spotlight_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(i,"string"),"symbol"===spotlight_typeof(u)?u:String(u)),o)}var i,u}function spotlight_createClass(t,r,a){return r&&spotlight_defineProperties(t.prototype,r),a&&spotlight_defineProperties(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function spotlight_get(){return spotlight_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,a){var o=function spotlight_superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=spotlight_getPrototypeOf(t)););return t}(t,r);if(o){var i=Object.getOwnPropertyDescriptor(o,r);return i.get?i.get.call(arguments.length<3?t:a):i.value}},spotlight_get.apply(this,arguments)}function spotlight_setPrototypeOf(t,r){return spotlight_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},spotlight_setPrototypeOf(t,r)}function spotlight_createSuper(t){var r=function spotlight_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var a,o=spotlight_getPrototypeOf(t);if(r){var i=spotlight_getPrototypeOf(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return function spotlight_possibleConstructorReturn(t,r){if(r&&("object"===spotlight_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return spotlight_assertThisInitialized(t)}(this,a)}}function spotlight_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function spotlight_getPrototypeOf(t){return spotlight_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},spotlight_getPrototypeOf(t)}var d=700,y={query:"",filters:[]},v=0,b=function(t){!function spotlight_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&spotlight_setPrototypeOf(t,r)}(Spotlight,Application);var r,a,o=spotlight_createSuper(Spotlight);function Spotlight(){var t,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.first,h=a.toTaskbar;return spotlight_classCallCheck(this,Spotlight),r=o.call(this),d=(0,p.$8)("spotlightWidth")||700,r.first=i,r.toTaskbar=h,r.ACTOR_ITEMS_INDEX=[],null===(t=ui.spotlightOmnisearch)||void 0===t||t.close(),ui.spotlightOmnisearch=spotlight_assertThisInitialized(r),(0,u.em)().then((function(t){t&&r._onSearch()})),r._onSearch=debounce(r._onSearch,167),r.updateStoredPosition=debounce(r.updateStoredPosition,167),document.addEventListener("mousedown",Spotlight.onClickAway),r.indexActorItems(),r}return spotlight_createClass(Spotlight,[{key:"APP_ID",get:function get(){return this.constructor.APP_ID}},{key:"indexActorItems",value:function indexActorItems(){var t,r,a=this,o=null!==(t=null===(r=canvas)||void 0===r||null===(r=r.tokens)||void 0===r?void 0:r.controlled.map((function(t){return t.actor})))&&void 0!==t?t:[];game.i18n.localize("DOCUMENT.Item");_token&&!o.includes(_token.actor)&&o.push(_token.actor),o.includes(game.user.character)||o.push(game.user.character);var i,u=spotlight_createForOfIteratorHelper(o);try{var p=function _loop(){var t,r=i.value;if(!r)return"continue";var o=r.items.map((function(t){var a,o,i=[];return t.use&&i.push({name:"".concat(T,".actions.use-item"),icon:'<i class="fas fa-hand-paper"></i>',callback:(a=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee(){return spotlight_regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t.use();case 1:case"end":return r.stop()}}),_callee)}))),function callback(){return a.apply(this,arguments)})}),new h.C({name:t.name,type:"Item owned",description:r.name,img:t.img,icon:["fas fa-user-circle","fas fa-suitcase"],data:{uuid:t.uuid,documentName:"Item"},actions:i,onClick:(o=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee2(){return spotlight_regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:t.sheet.render(!0);case 1:case"end":return r.stop()}}),_callee2)}))),function onClick(){return o.apply(this,arguments)})})}));(t=a.ACTOR_ITEMS_INDEX).push.apply(t,_toConsumableArray(o))};for(u.s();!(i=u.n()).done;)p()}catch(t){u.e(t)}finally{u.f()}}},{key:"getData",value:(a=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee3(){var t,r;return spotlight_regeneratorRuntime().wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:if(t=(0,p.$8)("appData"),(0,p.$8)("saveLastSearch")||(y={query:"",filters:[]}),r=t.timer,!(game.user.isGM&&r&&Date.now()>r)){a.next=8;break}return delete t.timer,a.next=8,(0,p.Lt)("appData",t);case 8:return a.abrupt("return",{first:this.first,lastSearch:y.query});case 9:case"end":return a.stop()}}),_callee3,this)}))),function getData(){return a.apply(this,arguments)})},{key:"activateListeners",value:function activateListeners(t){var r,a=this;spotlight_get(spotlight_getPrototypeOf(Spotlight.prototype),"activateListeners",this).call(this,t);var o=(t=null!==(r=t[0])&&void 0!==r?r:t).closest("#spotlight");this._html=t,this.toTaskbar&&o.classList.add("to-taskbar");var i=t.querySelector(".filters-container");y.filters.forEach((function(t){var r=document.createElement("span");r.innerText=t,r.classList.add("filter"),r.dataset.filter=t,r.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),r.remove(),a._onSearch()})),i.appendChild(r)})),t.querySelector("input").addEventListener("input",this._onSearch.bind(this)),t.querySelector("input").addEventListener("keydown",this._onKeyDown.bind(this)),setTimeout((function(){t.querySelector("input").disabled=!1,t.querySelector("input").focus()}),50),(0,p.$8)("darkMode")&&t.closest("#spotlight").classList.add("dark"),t.closest("#spotlight").classList.add("force-opacity"),setTimeout((function(){t.closest("#spotlight").classList.remove("force-opacity")}),300);var u=(0,p.$8)("position"),h=(0,p.$8)("spotlightPosition");h&&"save"===u&&(h.left+d>window.innerWidth||h.top>window.innerHeight||h.top<0||h.left<0||this.setPosition({left:h.left,top:h.top,width:d})),(0,p.$8)("alwaysOnTop")&&(t.closest("#spotlight").style.zIndex="9999 !important"),this.first&&(t.querySelector("input").value="?"),this._onSearch()}},{key:"setPosition",value:function setPosition(){var t;if(this.element[0]){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];(t=spotlight_get(spotlight_getPrototypeOf(Spotlight.prototype),"setPosition",this)).call.apply(t,[this].concat(a));var i=this._html.closest("#spotlight"),u=i.getBoundingClientRect().top,p=window.innerHeight-u-100,h=this._html.querySelector("section").style.maxHeight;if(this._html.querySelector("section").style.maxHeight="".concat(p,"px"),h!==this._html.querySelector("section").style.maxHeight){var d=i.classList.contains("to-taskbar");i.classList.toggle("inverted",p<window.innerHeight/3||d),this.setPosition({height:"auto"})}this.updateStoredPosition()}}},{key:"updateStoredPosition",value:function updateStoredPosition(){(0,p.Lt)("spotlightPosition",{left:this.position.left,top:this.position.top})}},{key:"_getFilters",value:function _getFilters(t){for(var r=[];t.includes("!");){var a=t.match(/^!(\w+)/g);if(!a)break;r.push(a[0].replace("!","").toLowerCase()),t=t.replace(a[0],"").trim()}return{filters:r,query:t}}},{key:"_onKeyDown",value:function _onKeyDown(t){var r=this._html,a=Date.now(),o=a-v;if(r.querySelector(".input-suggestion").innerText="",v=a,"Enter"===t.key){t.preventDefault();var i=t.shiftKey,u=t.altKey,p=r.querySelector(".search-item:not(.type-header).selected"),h=null!=p?p:r.querySelector(".search-item:not(.type-header)");if(!h)return;if(i){var d=h.querySelector(".search-item-actions button");d&&d.click()}else if(u){var y=h.querySelectorAll(".search-item-actions button")[1];y&&y.click()}else null==h||h.click();this.close()}if("Escape"===t.key&&this.close(),"Backspace"===t.key&&!r.querySelector("input").value){var b=r.querySelectorAll(".filters-container .filter"),w=b[b.length-1];w&&w.remove(),this._onSearch()}if("ArrowUp"===t.key||"ArrowDown"===t.key){var E,k=r.querySelector(".search-item.selected");if(!k){var T=r.querySelector(".search-item:not(.type-header)");return void(T&&T.classList.add("selected"))}if(t.ctrlKey){for(E=k["ArrowUp"===t.key?"previousElementSibling":"nextElementSibling"];E&&!E.classList.contains("type-header");)E=E["ArrowUp"===t.key?"previousElementSibling":"nextElementSibling"];if(E&&(E=E["ArrowUp"===t.key?"previousElementSibling":"nextElementSibling"],"ArrowUp"===t.key)){for(;E&&!E.classList.contains("type-header");)E=E.previousElementSibling;E=E.nextElementSibling}}else(E=k["ArrowUp"===t.key?"previousElementSibling":"nextElementSibling"])&&E.classList.contains("type-header")&&(E=E["ArrowUp"===t.key?"previousElementSibling":"nextElementSibling"]);E&&(k.classList.remove("selected"),E.classList.add("selected"),E.scrollIntoView({block:"nearest",behavior:"smooth"}))}" "===t.key&&t.shiftKey&&o<400&&this.close()}},{key:"_onSearch",value:function _onSearch(){var t=this;if(!this.closing){var r=this._html.querySelector("input"),a=this._html.querySelector(".input-suggestion"),o=r.value.toLowerCase(),h=(o=function convertFullWidthToRegular(t){var r="０１２３４５６７８９",a="0123456789",o=new RegExp("["+r+"]","g");return t.replace(o,(function(t){return a[r.indexOf(t)]}))}(o)).includes(" ");(o=o.trim())||(a.innerText="");var d=this._getFilters(o),v=d.filters;o=d.query;var b=v.length>0;if(b){var w=u.Oq.filter((function(t){return t.startsWith(v[0])}));a.innerText="!".concat(w.join(" / "))}if(b&&h){var k=this._html.querySelector(".filters-container");v.forEach((function(o){var i=document.createElement("span"),p=u.Oq.filter((function(t){return t.startsWith(o)})),h=1===p.length?p[0]:o;i.innerText=h,i.classList.add("filter"),i.dataset.filter=h,i.addEventListener("click",(function(r){r.preventDefault(),r.stopPropagation(),i.remove(),t._onSearch()})),k.appendChild(i),r.value=t._html.querySelector("input").value.replace("!".concat(o),"").trim(),a.innerText=""}))}this._html.querySelectorAll(".filters-container .filter").forEach((function(t){v.push(t.dataset.filter)})),b=v.length>0,y={query:o,filters:v};var T=this._html.querySelector("section"),x=!!(0,p.$8)("appData").timer;if(T.classList.toggle("no-results",!o&&!x&&!b),!o&&!x&&!b)return this._html.querySelector("#search-result").innerHTML="",void this.setPosition({height:"auto"});var O,L=[],S=function completeSearch(){var o={};L.forEach((function(t){o[t.type]||(o[t.type]=[]),o[t.type].push(t)}));var i=!1,u=t._html.querySelector("#search-result");u.innerHTML="";for(var p=function _loop2(){var t=_slicedToArray(d[h],2),o=t[0],p=t[1],y=[],v=[];p.forEach((function(t){var r=t.name.toLowerCase();R.some((function(t){return r.startsWith(t)}))?y.push(t):v.push(t)})),v.sort((function(t,r){return t.name.localeCompare(r.name)})),y.sort((function(t,r){return t.name.localeCompare(r.name)})),y.push.apply(y,v);var b=document.createElement("li");b.innerText=o.replaceAll("-"," ").replaceAll(" "," - ").replace(/([a-z])([A-Z])/g,"$1 $2"),b.classList.add("type-header"),o.includes("special-app")||u.appendChild(b),y.forEach((function(t){if(!i){i=!0;var o=document.createElement("div");o.innerHTML=t.name,a.innerText=a.innerText?a.innerText:r.value+" "+o.innerText}u.appendChild(t.element)}))},h=0,d=Object.entries(o);h<d.length;h++)p();L.length||T.classList.add("no-results"),t.setPosition({height:"auto"}),r.placeholder=""},P=spotlight_createForOfIteratorHelper(i.q);try{var I=function _loop6(){var t=O.value;return t.query=o,b&&!v.every((function(r){return t.type.toLowerCase().includes(r)}))?"continue":x&&t.type.includes("timer")?(L.push(new E(t)),o?"continue":"break"):void(t.match(o)&&L.push(new E(t)))};for(P.s();!(O=P.n()).done;){var A=I();if("continue"!==A&&"break"===A)break}}catch(t){P.e(t)}finally{P.f()}var R=o.split(" ").map((function(t){return t.trim()})).filter((function(t){return t}));if(!o&&x)return S();for(var D=function _loop3(){if(L.length>50)return"break";var r=t.ACTOR_ITEMS_INDEX[M];if(r.query=o,b&&!v.every((function(t){return r.type.toLowerCase().includes(t)})))return"continue";R.every((function(t){return r.match(t)}))&&L.push(new E(r))},M=0;M<this.ACTOR_ITEMS_INDEX.length;M++){var G=D();if("break"===G)break}for(var N=function _loop4(){if(L.length>50)return"break";var t=u.Lt[j];if(t.query=o,b&&!v.every((function(r){return t.type.toLowerCase().includes(r)})))return"continue";R.every((function(r){return t.match(r)}))&&L.push(new E(t))},j=0;j<u.Lt.length;j++){var U=N();if("break"===U)break}for(var W=function _loop5(){if(L.length>50)return"break";var t=u.cM[B];if(t.query=o,b&&!v.some((function(r){return t.type.toLowerCase().includes(r)})))return"continue";R.every((function(r){return t.match(r)}))&&L.push(new E(t))},B=0;B<u.cM.length;B++){var K=W();if("break"===K)break}S()}}},{key:"setDraggingState",value:function setDraggingState(t){var r=this;setTimeout((function(){r._html.closest("#spotlight").classList.toggle("dragging",t)}),1)}},{key:"close",value:(r=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee4(){var t,r,a,o,i=arguments;return spotlight_regeneratorRuntime().wrap((function _callee4$(u){for(;;)switch(u.prev=u.next){case 0:for(ui.spotlightOmnisearch=null,document.removeEventListener("mousedown",Spotlight.onClickAway),r=i.length,a=new Array(r),o=0;o<r;o++)a[o]=i[o];return u.abrupt("return",(t=spotlight_get(spotlight_getPrototypeOf(Spotlight.prototype),"close",this)).call.apply(t,[this].concat(a)));case 4:case"end":return u.stop()}}),_callee4,this)}))),function close(){return r.apply(this,arguments)})}],[{key:"APP_ID",get:function get(){return this.name.split(/(?=[A-Z])/).join("-").toLowerCase()}},{key:"defaultOptions",get:function get(){return mergeObject(spotlight_get(spotlight_getPrototypeOf(Spotlight),"defaultOptions",this),{id:this.APP_ID,template:"modules/".concat(T,"/templates/").concat(this.APP_ID,".hbs"),popOut:!0,resizable:!1,minimizable:!1,width:d,top:window.innerHeight/4,classes:(0,p.$8)("compactMode")?["compact"]:[],title:game.i18n.localize("".concat(T,".").concat(this.APP_ID,".title"))})}},{key:"onClickAway",value:function onClickAway(t){var r;(0,p.$8)("clickToDismiss")&&(t.target.closest("#spotlight")||null===(r=ui.spotlightOmnisearch)||void 0===r||r.close())}},{key:"toTaskbar",value:function toTaskbar(t){var r=t.left;t.bottom;new Spotlight({toTaskbar:r}).render(!0,{left:r})}}]),Spotlight}();var w=null;var E=function(){function SearchItem(t){var r,a;spotlight_classCallCheck(this,SearchItem),w||function loadBasicLocalizations(){w={MACRO:game.i18n.localize("DOCUMENT.Macro"),JOURNAL_ENTRY:game.i18n.localize("DOCUMENT.JournalEntry"),ROLL_TABLE:game.i18n.localize("DOCUMENT.RollTable"),PLAYLIST:game.i18n.localize("DOCUMENT.Playlist"),SCENE:game.i18n.localize("DOCUMENT.Scene"),JOURNAL_ENTRY_PAGE:game.i18n.localize("DOCUMENT.JournalEntryPage")}}(),this.name=t.name,this.nameExtra=null!==(r=t.nameExtra)&&void 0!==r?r:"",this.description=t.description,this.type=t.type,this.data=t.data,this.img=t.img,this.dragData=t.dragData,this.actions=t.actions,(0,p.$8)("showImages")||(this.img=null),this.icon=Array.isArray(t.icon)?t.icon:[t.icon],this.element=document.createElement("li"),(a=this.element.classList).add.apply(a,["search-item"].concat(_toConsumableArray(this.type.split(" ")))),this.icon.length>1&&this.element.classList.add("multi-icons"),this.searchTerm=t,this.render(),this.addElementListeners()}return spotlight_createClass(SearchItem,[{key:"addElementListeners",value:function addElementListeners(){var t,r=this;(this.element.addEventListener("click",(function(t){var a,o;null===(a=(o=r.searchTerm).onClick)||void 0===a||a.call(o,t,r.searchTerm)})),this.setDraggable(),(0,p.$8)("appData").timer&&this.type.includes("timer"))&&(t=setInterval((function(){document.body.contains(r.element)?(r.name=r.searchTerm.name,r.render()):clearInterval(t)}),1e3))}},{key:"render",value:function render(){var t,r,a=this.icon.map((function(t){return'<i class="'.concat(t,'"></i>')})).join("");this.element.innerHTML="".concat(this.img?'<img src="'.concat(this.img,'" alt="').concat(this.name,'">'):""," ").concat(a,' <div class="search-info"><span class="search-entry-name">').concat(this.name+this.nameExtra,"</span>").concat(this.description?"<p>".concat(this.description,"</p>"):"","</div>");var o=this.getActions();if(o){var i,u=null===(i=this.data)||void 0===i||null===(i=i.documentName)||void 0===i?void 0:i.includes("Journal"),p=document.createElement("div");o.actions.length<=3&&!u&&p.classList.add("search-entry-name-wrapper"),p.appendChild(this.element.querySelector(".search-entry-name")),this.element.querySelector(".search-info").insertAdjacentElement("afterbegin",p),p.appendChild(o.actionsContainer)}var h=this.element.querySelector(".s-toggle-setting");h&&h.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();var r=game.settings.get(h.dataset.namespace,h.dataset.key);game.settings.set(h.dataset.namespace,h.dataset.key,!r),h.classList.remove("fa-toggle-on","fa-toggle-off"),h.classList.add("fa-toggle-".concat(r?"off":"on"))})),null===(t=(r=this.searchTerm).activateListeners)||void 0===t||t.call(r,this.element)}},{key:"getActions",value:function getActions(){var t,r,a,o,i,u,p,h,d=this,y=null!==(t=_toConsumableArray(this.actions))&&void 0!==t?t:[];if(this.type.includes(w.MACRO))y.push({name:"".concat(T,".actions.execute"),icon:'<i class="fas fa-terminal"></i>',callback:(h=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee5(){return spotlight_regeneratorRuntime().wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fromUuid(d.data.uuid);case 2:t.sent.execute();case 3:case"end":return t.stop()}}),_callee5)}))),function callback(){return h.apply(this,arguments)})});else if(this.type==w.SCENE)y.push({name:"".concat(T,".actions.view"),icon:'<i class="fas fa-eye"></i>',callback:(p=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee6(){return spotlight_regeneratorRuntime().wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fromUuid(d.data.uuid);case 2:t.sent.view();case 3:case"end":return t.stop()}}),_callee6)}))),function callback(){return p.apply(this,arguments)})},{name:"".concat(T,".actions.activate"),icon:'<i class="fas fa-play"></i>',callback:(u=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee7(){return spotlight_regeneratorRuntime().wrap((function _callee7$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fromUuid(d.data.uuid);case 2:t.sent.activate();case 3:case"end":return t.stop()}}),_callee7)}))),function callback(){return u.apply(this,arguments)})},{name:"".concat(T,".actions.preload"),icon:'<i class="fas fa-download"></i>',callback:(i=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee8(){var t;return spotlight_regeneratorRuntime().wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:t=fromUuidSync(d.data.uuid),game.scenes.preload(t.id,!0);case 2:case"end":return r.stop()}}),_callee8)}))),function callback(){return i.apply(this,arguments)})});else if(this.type.includes(w.ROLL_TABLE))y.push({name:"".concat(T,".actions.roll-table"),icon:'<i class="fas fa-dice-d20"></i>',callback:(o=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee9(){return spotlight_regeneratorRuntime().wrap((function _callee9$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fromUuid(d.data.uuid);case 2:t.sent.draw();case 3:case"end":return t.stop()}}),_callee9)}))),function callback(){return o.apply(this,arguments)})});else if(this.type.includes(w.PLAYLIST)){var v=fromUuidSync(this.data.uuid);v&&(v.playing?y.push({name:"".concat(T,".actions.stop-playlist"),icon:'<i class="fas fa-stop"></i>',callback:(a=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee10(){return spotlight_regeneratorRuntime().wrap((function _callee10$(t){for(;;)switch(t.prev=t.next){case 0:v.stopAll();case 1:case"end":return t.stop()}}),_callee10)}))),function callback(){return a.apply(this,arguments)})}):y.push({name:"".concat(T,".actions.play-playlist"),icon:'<i class="fas fa-play"></i>',callback:(r=spotlight_asyncToGenerator(spotlight_regeneratorRuntime().mark((function _callee11(){return spotlight_regeneratorRuntime().wrap((function _callee11$(t){for(;;)switch(t.prev=t.next){case 0:v.playAll();case 1:case"end":return t.stop()}}),_callee11)}))),function callback(){return r.apply(this,arguments)})}))}else if(this.type.includes(w.JOURNAL_ENTRY)||this.type.includes(w.JOURNAL_ENTRY_PAGE)){var b=this.searchTerm.query.toLowerCase(),E=y.filter((function(t){return t.name.toLowerCase().includes(b)}));E.length&&(y.length=0,y.push.apply(y,_toConsumableArray(E)))}if(!y.length)return null;var k=document.createElement("div");return k.classList.add("search-item-actions"),y.forEach((function(t){var r=document.createElement("button");r.innerHTML=t.icon+" "+game.i18n.localize(t.name),r.addEventListener("click",(function(r){r.preventDefault(),r.stopPropagation(),t.callback(r)})),k.appendChild(r)})),{actionsContainer:k,actions:y}}},{key:"setDragging",value:function setDragging(t){var r,a;null===(r=(a=this.searchTerm).onDragStart)||void 0===r||r.call(a,t),setTimeout((function(){document.querySelector("#spotlight").classList.add("dragging")}),1)}},{key:"endDragging",value:function endDragging(t){var r,a;document.querySelector("#spotlight").classList.remove("dragging"),null===(r=(a=this.searchTerm).onDragEnd)||void 0===r||r.call(a,t)}},{key:"setDraggable",value:function setDraggable(){var t=this;this.data.uuid&&(this.element.setAttribute("draggable",!0),this.element.addEventListener("dragstart",(function(r){t.setDragging(r),r.dataTransfer.setData("text/plain",JSON.stringify({type:t.data.documentName,uuid:t.data.uuid}))})),this.element.addEventListener("dragend",(function(r){t.endDragging(r)}))),this.dragData&&(this.element.setAttribute("draggable",!0),this.element.addEventListener("dragstart",(function(r){t.setDragging(r),r.dataTransfer.setData("text/plain",JSON.stringify(t.dragData))})),this.element.addEventListener("dragend",(function(r){t.endDragging(r)})))}}]),SearchItem}();var k=a(91),T="spotlight-omnisearch";Hooks.on("init",(function(){(0,p.Yq)(),o.register(),CONFIG.SpotlightOmniseach={app:b,INDEX:u.Lt,SearchTerm:h.C,rebuildIndex:function rebuildIndex(){return(0,u.em)(!0)}}})),Hooks.once("canvasReady",(function(){(0,p.$8)("firstTime")&&(setTimeout((function(){!game.user.isGM&&(0,p.$8)("gmOnly")||new b({first:!0}).render(!0)}),1e3),(0,p.Lt)("firstTime",!1))})),Hooks.on("ready",(function(){(0,p.$8)("enableCtrlSpace")&&document.addEventListener("keydown",(function(t){if(t.ctrlKey&&" "===t.key){if(!game.user.isGM&&(0,p.$8)("gmOnly"))return;var r=Object.values(ui.windows).find((function(t){return t instanceof b}));r?r.close():(new b).render(!0)}})),(0,k.Q)()})),Hooks.on("init",(function(){game.keybindings.register(T,"toggleSpotlight",{name:"".concat(T,".hotkeys.toggleSpotlight.name"),editable:[{key:"Space",modifiers:["Shift"]}],restricted:!1,precedence:CONST.KEYBINDING_PRECEDENCE.PRIORITY,onDown:function onDown(t){if(game.user.isGM||!(0,p.$8)("gmOnly")){var r=Object.values(ui.windows).find((function(t){return t instanceof b}));r?r.close():(new b).render(!0)}}})}))},411:(t,r,a)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,u=void 0,u=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var o=a.call(t,r||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(i,"string"),"symbol"===_typeof(u)?u:String(u)),o)}var i,u}a.d(r,{C:()=>o});var o=function(){function BaseSearchTerm(t){var r=t.name,a=t.nameExtra,o=void 0===a?"":a,i=t.description,u=void 0===i?"":i,p=t.keywords,h=void 0===p?[]:p,d=t.actions,y=void 0===d?[]:d,v=t.dragData,b=t.type,w=t.data,E=void 0===w?{}:w,k=t.img,T=t.icon,x=t.onClick,O=void 0===x?null:x,L=t.onDragStart,S=void 0===L?null:L,P=t.onDragEnd,I=void 0===P?null:P,A=t.match,R=void 0===A?null:A,D=t.activateListeners,M=void 0===D?null:D;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BaseSearchTerm),this._name="function"==typeof r?r.bind(this):function(){return r},this._description="function"==typeof u?u.bind(this):function(){return u},this._actions="function"==typeof y?y.bind(this):function(){return y},this.dragData=v,this.keywords=h.map((function(t){return t.toLowerCase()})),this.type=b,this.data=E,this.img=k,this.icon=T,this._nameExtra="function"==typeof o?o.bind(this):function(){return o},M&&(this.activateListeners=M.bind(this)),O&&(this._onClick=O.bind(this)),I&&(this._onDragEnd=I.bind(this)),S&&(this._onDragStart=S.bind(this)),R&&(this.match=R.bind(this))}return function _createClass(t,r,a){return r&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}(BaseSearchTerm,[{key:"onClick",value:function onClick(){this._onClick&&this._onClick.apply(this,arguments)}},{key:"onDragStart",value:function onDragStart(){this._onDragStart&&this._onDragStart.apply(this,arguments)}},{key:"onDragEnd",value:function onDragEnd(){this._onDragEnd&&this._onDragEnd.apply(this,arguments)}},{key:"match",value:function match(t){try{return this.name.toLowerCase().includes(t)||this.keywords.some((function(r){return r.includes(t)}))}catch(t){return console.error("Error matching search term:",this),console.error(t),!1}}},{key:"name",get:function get(){return this._name(this)}},{key:"nameExtra",get:function get(){return this._nameExtra(this)}},{key:"description",get:function get(){return this._description(this)}},{key:"actions",get:function get(){return this._actions(this)}}]),BaseSearchTerm}()},934:(t,r,a)=>{a.d(r,{Lt:()=>y,Oq:()=>v,cM:()=>b,em:()=>buildIndex});var o=a(411),i=a(83),u=a(575);a(97);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var o,i,u,p,h=[],d=!0,y=!1;try{if(u=(a=a.call(t)).next,0===r){if(Object(a)!==a)return;d=!1}else for(;!(d=(o=u.call(a)).done)&&(h.push(o.value),h.length!==r);d=!0);}catch(t){y=!0,i=t}finally{try{if(!d&&null!=a.return&&(p=a.return(),Object(p)!==p))return}finally{if(y)throw i}}return h}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.push.apply(a,o)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function _defineProperty(t,r,a){return(r=function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var o=a.call(t,r||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,p=!0,h=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();return p=t.done,t},e:function e(t){h=!0,u=t},f:function f(){try{p||null==a.return||a.return()}finally{if(h)throw u}}}}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(t,r,a){t[r]=a.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",p=i.asyncIterator||"@@asyncIterator",h=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var u=r&&r.prototype instanceof Generator?r:Generator,p=Object.create(u.prototype),h=new Context(i||[]);return o(p,"_invoke",{value:makeInvokeMethod(t,a,h)}),p}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var y={};define(y,u,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(values([])));b&&b!==r&&a.call(b,u)&&(y=b);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(o,i,u,p){var h=tryCatch(t[o],t,i);if("throw"!==h.type){var d=h.arg,y=d.value;return y&&"object"==_typeof(y)&&a.call(y,"__await")?r.resolve(y.__await).then((function(t){invoke("next",t,u,p)}),(function(t){invoke("throw",t,u,p)})):r.resolve(y).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,p)}))}p(h.arg)}var i;o(this,"_invoke",{value:function value(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,o){invoke(t,a,r,o)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,a){var o="suspendedStart";return function(i,u){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw u;return doneResult()}for(a.method=i,a.arg=u;;){var p=a.delegate;if(p){var h=maybeInvokeDelegate(p,a);if(h){if(h===d)continue;return h}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===o)throw o="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o="executing";var y=tryCatch(t,r,a);if("normal"===y.type){if(o=a.done?"completed":"suspendedYield",y.arg===d)continue;return{value:y.arg,done:a.done}}"throw"===y.type&&(o="completed",a.method="throw",a.arg=y.arg)}}}function maybeInvokeDelegate(t,r){var a=r.method,o=t.iterator[a];if(void 0===o)return r.delegate=null,"throw"===a&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var i=tryCatch(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var u=i.arg;return u?u.done?(r[t.resultName]=u.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):u:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function next(){for(;++o<t.length;)if(a.call(t,o))return next.value=t[o],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(w,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,h,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,p,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,o,i,u){void 0===u&&(u=Promise);var p=new AsyncIterator(wrap(r,a,o,i),u);return t.isGeneratorFunction(a)?p:p.next().then((function(t){return t.done?t.value:p.next()}))},defineIteratorMethods(w),define(w,h,"Generator"),define(w,u,(function(){return this})),define(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),a=[];for(var o in r)a.push(o);return a.reverse(),function next(){for(;a.length;){var t=a.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,o){return u.type="throw",u.arg=t,r.next=a,o&&(r.method="next",r.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var p=a.call(i,"catchLoc"),h=a.call(i,"finallyLoc");if(p&&h){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(p){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var u=i;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var p=u?u.completion:{};return p.type=t,p.arg=r,u?(this.method="next",this.next=u.finallyLoc,d):this.complete(p)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var o=a.completion;if("throw"===o.type){var i=o.arg;resetTryEntry(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},t}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function asyncGeneratorStep(t,r,a,o,i,u,p){try{var h=t[u](p),d=h.value}catch(t){return void a(t)}h.done?r(d):Promise.resolve(d).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var u=t.apply(r,a);function _next(t){asyncGeneratorStep(u,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}var p=Object.keys(CONST.IMAGE_FILE_EXTENSIONS),h=Object.keys(CONST.AUDIO_FILE_EXTENSIONS),d=Object.keys(CONST.VIDEO_FILE_EXTENSIONS),y=[],v=[],b=[],w=!1;function buildIndex(){return _buildIndex.apply(this,arguments)}function _buildIndex(){return _buildIndex=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t,r,a,o,p,h,d,E=arguments;return _regeneratorRuntime().wrap((function _callee$(k){for(;;)switch(k.prev=k.next){case 0:if(E.length>0&&void 0!==E[0]&&E[0]&&(w=!1,y.length=0,v.length=0,b.length=0),!w){k.next=4;break}return k.abrupt("return");case 4:return w=!0,null!==(t=ui.spotlightOmnisearch)&&void 0!==t&&t.rendered&&(a=ui.spotlightOmnisearch._html.querySelector(".fa-search"))&&(a.classList.add("fa-spin"),a.classList.remove("fa-search"),a.classList.add("fa-spinner")),k.next=8,(0,u.L)();case 8:return k.next=10,buildModuleIntegration();case 10:return k.next=12,buildWeatherEffects();case 12:if(!(0,i.$8)("searchSettings")){k.next=15;break}return k.next=15,buildSettings();case 15:if(!(0,i.$8)("searchUtils")){k.next=18;break}return k.next=18,buildSettingsTab();case 18:if(!(0,i.$8)("searchSidebar")){k.next=21;break}return k.next=21,buildCollections();case 21:return k.next=23,buildStatusEffects();case 23:if(!(0,i.$8)("searchCompendium")){k.next=26;break}return k.next=26,buildCompendiumIndex();case 26:if(!(0,i.$8)("searchFiles")){k.next=29;break}return k.next=29,buildFiles();case 29:return o=[],Hooks.callAll("spotlightOmnisearch.indexBuilt",y,o),k.next=33,Promise.all(o);case 33:return p=new Set,y.forEach((function(t){p.add(t.type)})),h=["mp3","ogg","webm","webp","png","jpg","jpeg"],Array.from(p).forEach((function(t){var r;(r=h).push.apply(r,_toConsumableArray(t.split(" ").map((function(t){return t.toLowerCase()}))))})),h.sort((function(t,r){return t.localeCompare(r)})),h=Array.from(new Set(h)),v.push.apply(v,_toConsumableArray(h)),null!==(r=ui.spotlightOmnisearch)&&void 0!==r&&r.rendered&&(d=ui.spotlightOmnisearch._html.querySelector(".fa-spinner"))&&(d.classList.remove("fa-spin"),d.classList.remove("fa-spinner"),d.classList.add("fa-search")),k.abrupt("return",y);case 42:case"end":return k.stop()}}),_callee)}))),_buildIndex.apply(this,arguments)}function createDocumentTypeTypeString(t,r){if(!r)return"";t=t.toUpperCase(),r=r.charAt(0).toUpperCase()+r.slice(1);var a="".concat(t,".Type").concat(r),o=game.i18n.localize(a);return" ".concat(o!==a?o:r)}function buildCompendiumIndex(){return _buildCompendiumIndex.apply(this,arguments)}function _buildCompendiumIndex(){return _buildCompendiumIndex=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var t,r,a,u,p,h,d;return _regeneratorRuntime().wrap((function _callee4$(v){for(;;)switch(v.prev=v.next){case 0:return t=(0,i.$8)("compendiumConfig"),r=Array.from(game.packs).filter((function(r){return(game.user.isGM||!r.private)&&!1!==t[r.metadata.id]})),a=[],v.next=5,Promise.all(r.map((function(t){return t.getIndex()})));case 5:u=game.i18n.localize("PACKAGE.TagCompendium"),p=_createForOfIteratorHelper(r),v.prev=7,d=_regeneratorRuntime().mark((function _loop(){var t,r,i,p,d,y;return _regeneratorRuntime().wrap((function _loop$(v){for(;;)switch(v.prev=v.next){case 0:return i=h.value,p=null!==(t="system"===i.metadata.packageType?game.system.title:null===(r=game.modules.get(i.metadata.packageName))||void 0===r?void 0:r.title)&&void 0!==t?t:game.i18n.localize("PACKAGE.Type.world"),v.t0=Array,v.next=5,i.getIndex();case 5:v.t1=v.sent,d=v.t0.from.call(v.t0,v.t1),y=game.i18n.localize("DOCUMENT.".concat(i.documentName)),a.push(new o.C({name:i.title,description:p,img:i.banner,keywords:[],type:u,data:_objectSpread({},i.metadata),icon:[CONFIG[i.documentName].sidebarIcon,"fas fa-atlas"],onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:i.render(!0);case 1:case"end":return t.stop()}}),_callee2)})));return function onClick(){return t.apply(this,arguments)}}()})),d.forEach((function(t){var r;a.push(new o.C({name:t.name,description:i.title+" - "+p,keywords:[i.title],type:y+" "+u+createDocumentTypeTypeString(i.documentName,t.type),data:_objectSpread(_objectSpread({},t),{},{documentName:i.documentName}),img:t.img,icon:["fas fa-atlas",CONFIG[i.documentName].sidebarIcon],onClick:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){return _regeneratorRuntime().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fromUuid(t.uuid);case 2:r.sent.sheet.render(!0);case 4:case"end":return r.stop()}}),_callee3)}))),function onClick(){return r.apply(this,arguments)})}))}));case 10:case"end":return v.stop()}}),_loop)})),p.s();case 10:if((h=p.n()).done){v.next=14;break}return v.delegateYield(d(),"t0",12);case 12:v.next=10;break;case 14:v.next=19;break;case 16:v.prev=16,v.t1=v.catch(7),p.e(v.t1);case 19:return v.prev=19,p.f(),v.finish(19);case 22:a.sort((function(t,r){return t.type.localeCompare(r.type)})),y.push.apply(y,a);case 24:case"end":return v.stop()}}),_callee4,null,[[7,16,19,22]])}))),_buildCompendiumIndex.apply(this,arguments)}function buildCollections(){return _buildCollections.apply(this,arguments)}function _buildCollections(){return _buildCollections=_asyncToGenerator(_regeneratorRuntime().mark((function _callee10(){var t,r,a,i,u,p,h,d;return _regeneratorRuntime().wrap((function _callee10$(v){for(;;)switch(v.prev=v.next){case 0:t=Array.from(game.collections),r=[],a=["Combat","Setting","FogExploration","ChatMessage","Folder"],i=game.i18n.localize("DOCUMENT.JournalEntryPage"),u=game.i18n.localize("ACTOR.TypeCharacterPl"),p=_regeneratorRuntime().mark((function _loop2(){var t,p;return _regeneratorRuntime().wrap((function _loop2$(y){for(;;)switch(y.prev=y.next){case 0:if(t=d[h],p=game.i18n.localize("DOCUMENT.".concat(t.documentName)),!a.includes(t.documentName)){y.next=4;break}return y.abrupt("return","continue");case 4:Array.from(t).forEach((function(a){var h,d,y;if(a.isOwner){var v=[],b="",w="";a.folder&&(b="<i style='display: inline; opacity: 0.3;' class='fas fa-folder'></i> "+getFoldersRecursive(a).join(" / "));var E,k=[];if("JournalEntry"===t.documentName&&a.pages.forEach((function(t){var u;k.push({name:t.name,icon:'<i class="fa-solid fa-file-lines"></i>',callback:(u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){return _regeneratorRuntime().wrap((function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fromUuid(a.uuid);case 2:r.sent.sheet.render(!0,{pageId:t.id,anchor:null});case 4:case"end":return r.stop()}}),_callee5)}))),function callback(){return u.apply(this,arguments)})});var p,h,d=[],y=[];"image"===t.type&&d.push({name:game.i18n.localize("JOURNAL.ActionShow"),icon:'<i class="fa-solid fa-image"></i>',callback:(p=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(){return _regeneratorRuntime().wrap((function _callee6$(r){for(;;)switch(r.prev=r.next){case 0:new ImagePopout(t.src,{}).render(!0);case 1:case"end":return r.stop()}}),_callee6)}))),function callback(){return p.apply(this,arguments)})}),Object.values(t.toc).forEach((function(r){var o;y.push(r.text.toLowerCase()),d.push({name:r.text,icon:'<i class="fa-solid fa-hashtag"></i>',callback:(o=_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(){return _regeneratorRuntime().wrap((function _callee7$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,fromUuid(a.uuid);case 2:o.sent.sheet.render(!0,{pageId:t.id,anchor:r.slug});case 4:case"end":return o.stop()}}),_callee7)}))),function callback(){return o.apply(this,arguments)})})})),r.push(new o.C({name:t.name+" (".concat(a.name,")"),actions:d,keywords:y,description:b,type:i,data:_objectSpread(_objectSpread({},t),{},{documentName:t.documentName,uuid:t.uuid}),img:t.img,icon:["fas fa-earth-europe","fas fa-file-lines"],onClick:(h=_asyncToGenerator(_regeneratorRuntime().mark((function _callee8(){return _regeneratorRuntime().wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fromUuid(a.uuid);case 2:r.sent.sheet.render(!0,{pageId:t.id,anchor:null});case 4:case"end":return r.stop()}}),_callee8)}))),function onClick(){return h.apply(this,arguments)})}))})),"Actor"===t.documentName){var T,x=null===(T=a.flags["item-piles"])||void 0===T||null===(T=T.data)||void 0===T?void 0:T.type;x&&(v.push(x),w+=" ".concat(x)),a.hasPlayerOwner&&(w+=" ".concat(u))}r.push(new o.C({name:null!==(h=null!==(d=a.name)&&void 0!==d?d:null===(y=a.speaker)||void 0===y?void 0:y.alias)&&void 0!==h?h:a.content,description:b,keywords:v,actions:k,type:p+w,data:_objectSpread(_objectSpread({},a),{},{documentName:t.documentName,uuid:a.uuid}),img:a.img,icon:["fas fa-earth-europe",CONFIG[t.documentName].sidebarIcon],onClick:(E=_asyncToGenerator(_regeneratorRuntime().mark((function _callee9(){return _regeneratorRuntime().wrap((function _callee9$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fromUuid(a.uuid);case 2:t.sent.sheet.render(!0);case 4:case"end":return t.stop()}}),_callee9)}))),function onClick(){return E.apply(this,arguments)})}))}}));case 6:case"end":return y.stop()}}),_loop2)})),h=0,d=t;case 7:if(!(h<d.length)){v.next=15;break}return v.delegateYield(p(),"t0",9);case 9:if("continue"!==v.t0){v.next=12;break}return v.abrupt("continue",12);case 12:h++,v.next=7;break;case 15:r.sort((function(t,r){return t.type.localeCompare(r.type)})),y.push.apply(y,r);case 17:case"end":return v.stop()}}),_callee10)}))),_buildCollections.apply(this,arguments)}function buildSettings(){return _buildSettings.apply(this,arguments)}function _buildSettings(){return _buildSettings=_asyncToGenerator(_regeneratorRuntime().mark((function _callee13(){var t,r,a,i;return _regeneratorRuntime().wrap((function _callee13$(u){for(;;)switch(u.prev=u.next){case 0:t=[],r=game.i18n.localize("DOCUMENT.Setting"),a=function processSetting(a){var i,u,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(p=!0===p,a.name&&(a.config||p)&&!1!==a.config&&(game.user.isGM||"world"!==a.scope)){var h="";a.type===Boolean&&(h=function toggle(){var t=game.settings.get(a.namespace,a.key);return'<i class="s-toggle-setting fad fa-toggle-'.concat(t?"on":"off",'" data-namespace="').concat(a.namespace,'" data-key="').concat(a.key,'"></i>')});var d,y=null!==(i=a.icon)&&void 0!==i?i:"fas fa-cogs",v="";(v=a.namespace===game.system.id?game.system.title:"core"===a.namespace?game.i18n.localize("Core"):null===(u=game.modules.get(a.namespace))||void 0===u?void 0:u.title)&&(v="<strong>".concat(v,"</strong> - ")),t.push(new o.C({name:game.i18n.localize(a.name),nameExtra:h,description:v+game.i18n.localize(a.hint),query:a.key,keywords:["".concat(a.key).concat(a.namespace)],type:r,data:_objectSpread({},a),img:null,icon:[y],onClick:(d=_asyncToGenerator(_regeneratorRuntime().mark((function _callee11(){return _regeneratorRuntime().wrap((function _callee11$(t){for(;;)switch(t.prev=t.next){case 0:if(!p){t.next=3;break}return(new a.type).render(!0),t.abrupt("return");case 3:game.settings.sheet.render(!0),Hooks.once("renderSettingsConfig",(function(t,r){r=r[0];var o=a.namespace===game.system.id?"system":a.namespace,i=r.querySelector('.category-tab[data-tab="'.concat(o,'"]'));i&&i.click();var u=r.querySelector('[data-setting-id="'.concat(a.namespace+"."+a.key,'"]'));u&&(setTimeout((function(){u.scrollIntoView({behavior:"smooth"})}),100),u.style.backgroundColor="#0000ff29")}));case 5:case"end":return t.stop()}}),_callee11)}))),function onClick(){return d.apply(this,arguments)})}))}},game.settings.menus.forEach((function(t){return a(t,!0)})),game.settings.settings.forEach(a),i=game.i18n.localize("SETTINGS.Keybindings"),game.keybindings.actions.forEach((function(r,a){if(game.user.isGM||!r.restricted){var u,p=game.i18n.localize(r.name),h="";game.keybindings.bindings.get(a).forEach((function(t){h+='<span class="key">'.concat(KeybindingsConfig._humanizeBinding(t),"</span>")})),r.hint&&(h+=game.i18n.localize(r.hint)),t.push(new o.C({name:p,description:h,keywords:[],type:i,data:_objectSpread({},r),img:null,icon:["fas fa-keyboard"],onClick:(u=_asyncToGenerator(_regeneratorRuntime().mark((function _callee12(){return _regeneratorRuntime().wrap((function _callee12$(t){for(;;)switch(t.prev=t.next){case 0:(new KeybindingsConfig).render(!0),Hooks.once("renderKeybindingsConfig",(function(t,o){var i=(o=o[0]).querySelector('.tab[data-tab="'.concat(r.namespace,'"]')).querySelector('[data-action-id="'.concat(a,'"]'));i&&(setTimeout((function(){i.scrollIntoView({behavior:"smooth"})}),100),i.style.backgroundColor="#0000ff29")}));case 2:case"end":return t.stop()}}),_callee12)}))),function onClick(){return u.apply(this,arguments)})}))}})),y.push.apply(y,t);case 8:case"end":return u.stop()}}),_callee13)}))),_buildSettings.apply(this,arguments)}function buildSettingsTab(){return _buildSettingsTab.apply(this,arguments)}function _buildSettingsTab(){return _buildSettingsTab=_asyncToGenerator(_regeneratorRuntime().mark((function _callee15(){var t,r,a,i;return _regeneratorRuntime().wrap((function _callee15$(u){for(;;)switch(u.prev=u.next){case 0:t=document.querySelector(".settings-sidebar#settings"),r=t.querySelectorAll("button"),a=game.i18n.localize("SIDEBAR.TabSettings"),i=[],r.forEach((function(t){var r=t.innerText.trim(),u=t.querySelector("i");if(u){var p,h=u.className;if(r)i.push(new o.C({name:r,keywords:[],type:a,data:{},img:null,icon:[h],onClick:(p=_asyncToGenerator(_regeneratorRuntime().mark((function _callee14(){return _regeneratorRuntime().wrap((function _callee14$(r){for(;;)switch(r.prev=r.next){case 0:t.click();case 1:case"end":return r.stop()}}),_callee14)}))),function onClick(){return p.apply(this,arguments)})}))}})),y.push.apply(y,i);case 6:case"end":return u.stop()}}),_callee15)}))),_buildSettingsTab.apply(this,arguments)}var E=null;function buildFiles(){return _buildFiles.apply(this,arguments)}function _buildFiles(){return _buildFiles=_asyncToGenerator(_regeneratorRuntime().mark((function _callee17(){var t,r,a,i,u,y;return _regeneratorRuntime().wrap((function _callee17$(v){for(;;)switch(v.prev=v.next){case 0:if(game.user.isGM){v.next=2;break}return v.abrupt("return");case 2:if(r=null===(t=canvas.deepSearchCache)||void 0===t?void 0:t._fileIndexCache){v.next=5;break}return v.abrupt("return");case 5:a=[],i=_regeneratorRuntime().mark((function _loop3(){var t,r,i,v,b,w,k;return _regeneratorRuntime().wrap((function _loop3$(T){for(;;)switch(T.prev=T.next){case 0:t=_slicedToArray(y[u],2),r=t[0],i=t[1],v=r.split(".").pop().toLowerCase(),b="fas fa-file",w=!1,k=!1,p.includes(v)&&(b="fas fa-image",w=!0),d.includes(v)&&(b="fas fa-film",w=!0),h.includes(v)&&(b="fas fa-volume-up",k=!0),i.forEach((function(t){var i,u,p,h=null;w&&(h={type:"Tile",texture:{src:t},fromFilePicker:!0,tileSize:null!==(i=null===(u=canvas)||void 0===u||null===(u=u.grid)||void 0===u?void 0:u.size)&&void 0!==i?i:100});a.push(new o.C({name:decodeURIComponent(r),keywords:[t],type:"file "+r.split(".").pop().toLowerCase(),dragData:h,img:null,icon:[b],onClick:(p=_asyncToGenerator(_regeneratorRuntime().mark((function _callee16(){var r;return _regeneratorRuntime().wrap((function _callee16$(a){for(;;)switch(a.prev=a.next){case 0:if(w&&new ImagePopout(t,{}).render(!0),!k){a.next=8;break}return E&&E.stop(),a.next=5,AudioHelper.play({src:t,autoplay:!0,volume:.5,loop:!1},!1);case 5:E=a.sent,r=E,setTimeout((function(){r===E&&E.stop()}),5e3);case 8:case"end":return a.stop()}}),_callee16)}))),function onClick(){return p.apply(this,arguments)})}))}));case 9:case"end":return T.stop()}}),_loop3)})),u=0,y=Object.entries(r);case 8:if(!(u<y.length)){v.next=13;break}return v.delegateYield(i(),"t0",10);case 10:u++,v.next=8;break;case 13:b=a;case 14:case"end":return v.stop()}}),_callee17)}))),_buildFiles.apply(this,arguments)}function getFoldersRecursive(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.folder?(r.push(t.folder.name),getFoldersRecursive(t.folder,r)):r}function buildStatusEffects(){return _buildStatusEffects.apply(this,arguments)}function _buildStatusEffects(){return _buildStatusEffects=_asyncToGenerator(_regeneratorRuntime().mark((function _callee19(){var t,r,a,i;return _regeneratorRuntime().wrap((function _callee19$(u){for(;;)switch(u.prev=u.next){case 0:t=CONFIG.statusEffects,r=_createForOfIteratorHelper(t),u.prev=2,i=_regeneratorRuntime().mark((function _loop4(){var t;return _regeneratorRuntime().wrap((function _loop4$(r){for(;;)switch(r.prev=r.next){case 0:if((t=a.value).name){r.next=3;break}return r.abrupt("return","continue");case 3:y.push(new o.C({name:function name(){return game.i18n.localize(t.name)},keywords:[],type:"statusEffect",data:_objectSpread({},t),img:t.icon,icon:["fas fa-earth-europe","fas fa-bolt"],onClick:function(){var r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee18(){return _regeneratorRuntime().wrap((function _callee18$(r){for(;;)switch(r.prev=r.next){case 0:canvas.tokens.controlled.forEach((function(r){r.toggleEffect(t)}));case 1:case"end":return r.stop()}}),_callee18)})));return function onClick(){return r.apply(this,arguments)}}()}));case 4:case"end":return r.stop()}}),_loop4)})),r.s();case 5:if((a=r.n()).done){u.next=12;break}return u.delegateYield(i(),"t0",7);case 7:if("continue"!==u.t0){u.next=10;break}return u.abrupt("continue",10);case 10:u.next=5;break;case 12:u.next=17;break;case 14:u.prev=14,u.t1=u.catch(2),r.e(u.t1);case 17:return u.prev=17,r.f(),u.finish(17);case 20:case"end":return u.stop()}}),_callee19,null,[[2,14,17,20]])}))),_buildStatusEffects.apply(this,arguments)}function buildModuleIntegration(){return _buildModuleIntegration.apply(this,arguments)}function _buildModuleIntegration(){return _buildModuleIntegration=_asyncToGenerator(_regeneratorRuntime().mark((function _callee24(){var t,r,a,i,u,p,h,d,v,b,w,E,k,T,x;return _regeneratorRuntime().wrap((function _callee24$(O){for(;;)switch(O.prev=O.next){case 0:if(!game.dfreds){O.next=19;break}r=game.dfreds.effects.all,a=game.modules.get("dfreds-convenient-effects").title,i=_createForOfIteratorHelper(r),O.prev=4,p=_regeneratorRuntime().mark((function _loop5(){var t;return _regeneratorRuntime().wrap((function _loop5$(r){for(;;)switch(r.prev=r.next){case 0:t=u.value,y.push(new o.C({name:t.name,description:t.description,keywords:[],type:a,data:_objectSpread({},t),img:t.img,icon:["fas fa-hand-sparkles","fas fa-bolt"],onClick:function(){var r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee20(){return _regeneratorRuntime().wrap((function _callee20$(r){for(;;)switch(r.prev=r.next){case 0:game.dfreds.effectInterface.toggleEffect(t.name);case 1:case"end":return r.stop()}}),_callee20)})));return function onClick(){return r.apply(this,arguments)}}()}));case 2:case"end":return r.stop()}}),_loop5)})),i.s();case 7:if((u=i.n()).done){O.next=11;break}return O.delegateYield(p(),"t0",9);case 9:O.next=7;break;case 11:O.next=16;break;case 13:O.prev=13,O.t1=O.catch(4),i.e(O.t1);case 16:return O.prev=16,i.f(),O.finish(16);case 19:if(game.itempiles&&(h=Array.from(game.users).filter((function(t){return t!==game.user})),d=h.map((function(t){return{name:t.name,icon:'<i class="fas fa-handshake"></i>',callback:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee21(){return _regeneratorRuntime().wrap((function _callee21$(r){for(;;)switch(r.prev=r.next){case 0:game.itempiles.API.requestTrade(t);case 1:case"end":return r.stop()}}),_callee21)}))),function callback(){return r.apply(this,arguments)})};var r})),y.push(new o.C({name:game.i18n.localize("ITEM-PILES.ContextMenu.RequestTrade"),actions:d,keywords:[],type:"item-piles",data:{},img:null,icon:["fas fa-boxes"],onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee22(){return _regeneratorRuntime().wrap((function _callee22$(t){for(;;)switch(t.prev=t.next){case 0:game.itempiles.toggle();case 1:case"end":return t.stop()}}),_callee22)})));return function onClick(){return t.apply(this,arguments)}}()}))),null===(t=game.modules.get("mastercrafted"))||void 0===t||!t.active){O.next=53;break}v=ui.RecipeApp._currentApp._recipeBooks,b=_createForOfIteratorHelper(v),O.prev=23,b.s();case 25:if((w=b.n()).done){O.next=45;break}E=w.value,k=_createForOfIteratorHelper(E.recipes),O.prev=28,x=_regeneratorRuntime().mark((function _loop6(){var t;return _regeneratorRuntime().wrap((function _loop6$(r){for(;;)switch(r.prev=r.next){case 0:t=T.value,y.push(new o.C({name:t.name,description:E.name,keywords:[],type:"mastercrafted recipe",data:{},img:t.img,icon:["fas fa-book","fas fa-hammer"],onClick:function(){var r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee23(){return _regeneratorRuntime().wrap((function _callee23$(r){for(;;)switch(r.prev=r.next){case 0:new ui.RecipeApp(null,null,t.name).render(!0);case 1:case"end":return r.stop()}}),_callee23)})));return function onClick(){return r.apply(this,arguments)}}()}));case 2:case"end":return r.stop()}}),_loop6)})),k.s();case 31:if((T=k.n()).done){O.next=35;break}return O.delegateYield(x(),"t2",33);case 33:O.next=31;break;case 35:O.next=40;break;case 37:O.prev=37,O.t3=O.catch(28),k.e(O.t3);case 40:return O.prev=40,k.f(),O.finish(40);case 43:O.next=25;break;case 45:O.next=50;break;case 47:O.prev=47,O.t4=O.catch(23),b.e(O.t4);case 50:return O.prev=50,b.f(),O.finish(50);case 53:case"end":return O.stop()}}),_callee24,null,[[4,13,16,19],[23,47,50,53],[28,37,40,43]])}))),_buildModuleIntegration.apply(this,arguments)}function buildWeatherEffects(){return _buildWeatherEffects.apply(this,arguments)}function _buildWeatherEffects(){return _buildWeatherEffects=_asyncToGenerator(_regeneratorRuntime().mark((function _callee27(){var t,r,a,i;return _regeneratorRuntime().wrap((function _callee27$(u){for(;;)switch(u.prev=u.next){case 0:if(game.user.isGM){u.next=2;break}return u.abrupt("return");case 2:t=CONFIG.weatherEffects,r=_regeneratorRuntime().mark((function _loop7(){var t,r,u,p,h;return _regeneratorRuntime().wrap((function _loop7$(d){for(;;)switch(d.prev=d.next){case 0:t=_slicedToArray(i[a],2),r=t[0],u=t[1],CONFIG.fxmaster&&r.includes("fxmaster")?(p=r.replace("fxmaster.",""),h=CONFIG.fxmaster.particleEffects[p],y.push(new o.C({name:game.i18n.localize(h.label),description:h.description,keywords:[game.i18n.localize("SCENES.WeatherEffect")],type:"fxmaster "+game.i18n.localize("SCENES.WeatherEffect"),img:h.icon,icon:["fas fa-wand-magic-sparkles","fas fa-cloud-rain"],onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee25(){return _regeneratorRuntime().wrap((function _callee25$(t){for(;;)switch(t.prev=t.next){case 0:game.scenes.viewed.weather===r?game.scenes.viewed.update({weather:""}):game.scenes.viewed.update({weather:r});case 2:case"end":return t.stop()}}),_callee25)})));return function onClick(){return t.apply(this,arguments)}}()}))):y.push(new o.C({name:game.i18n.localize(u.label),description:u.description,keywords:[game.i18n.localize("SCENES.WeatherEffect")],type:game.i18n.localize("SCENES.WeatherEffect"),icon:["fas fa-map","fas fa-cloud-sun-rain"],onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee26(){return _regeneratorRuntime().wrap((function _callee26$(t){for(;;)switch(t.prev=t.next){case 0:game.scenes.viewed.weather===r?game.scenes.viewed.update({weather:""}):game.scenes.viewed.update({weather:r});case 2:case"end":return t.stop()}}),_callee26)})));return function onClick(){return t.apply(this,arguments)}}()}));case 3:case"end":return d.stop()}}),_loop7)})),a=0,i=Object.entries(t);case 5:if(!(a<i.length)){u.next=10;break}return u.delegateYield(r(),"t0",7);case 7:a++,u.next=5;break;case 10:case"end":return u.stop()}}),_callee27)}))),_buildWeatherEffects.apply(this,arguments)}},575:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>initSpecialSearches,q:()=>SPECIAL_SEARCHES});var _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(411),_main__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(97),_settings__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(83),_buildTermIndex__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(934);function _defineProperty(t,r,a){return(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function _toPropertyKey(t){var r=_toPrimitive(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var o=a.call(t,r||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(t,r,a){t[r]=a.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",p=i.asyncIterator||"@@asyncIterator",h=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var u=r&&r.prototype instanceof Generator?r:Generator,p=Object.create(u.prototype),h=new Context(i||[]);return o(p,"_invoke",{value:makeInvokeMethod(t,a,h)}),p}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var y={};define(y,u,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(values([])));b&&b!==r&&a.call(b,u)&&(y=b);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(o,i,u,p){var h=tryCatch(t[o],t,i);if("throw"!==h.type){var d=h.arg,y=d.value;return y&&"object"==_typeof(y)&&a.call(y,"__await")?r.resolve(y.__await).then((function(t){invoke("next",t,u,p)}),(function(t){invoke("throw",t,u,p)})):r.resolve(y).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,p)}))}p(h.arg)}var i;o(this,"_invoke",{value:function value(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,o){invoke(t,a,r,o)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,a){var o="suspendedStart";return function(i,u){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw u;return doneResult()}for(a.method=i,a.arg=u;;){var p=a.delegate;if(p){var h=maybeInvokeDelegate(p,a);if(h){if(h===d)continue;return h}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===o)throw o="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o="executing";var y=tryCatch(t,r,a);if("normal"===y.type){if(o=a.done?"completed":"suspendedYield",y.arg===d)continue;return{value:y.arg,done:a.done}}"throw"===y.type&&(o="completed",a.method="throw",a.arg=y.arg)}}}function maybeInvokeDelegate(t,r){var a=r.method,o=t.iterator[a];if(void 0===o)return r.delegate=null,"throw"===a&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var i=tryCatch(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var u=i.arg;return u?u.done?(r[t.resultName]=u.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):u:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function next(){for(;++o<t.length;)if(a.call(t,o))return next.value=t[o],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(w,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,h,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,p,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,o,i,u){void 0===u&&(u=Promise);var p=new AsyncIterator(wrap(r,a,o,i),u);return t.isGeneratorFunction(a)?p:p.next().then((function(t){return t.done?t.value:p.next()}))},defineIteratorMethods(w),define(w,h,"Generator"),define(w,u,(function(){return this})),define(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),a=[];for(var o in r)a.push(o);return a.reverse(),function next(){for(;a.length;){var t=a.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,o){return u.type="throw",u.arg=t,r.next=a,o&&(r.method="next",r.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var p=a.call(i,"catchLoc"),h=a.call(i,"finallyLoc");if(p&&h){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(p){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var u=i;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var p=u?u.completion:{};return p.type=t,p.arg=r,u?(this.method="next",this.next=u.finallyLoc,d):this.complete(p)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var o=a.completion;if("throw"===o.type){var i=o.arg;resetTryEntry(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},t}function asyncGeneratorStep(t,r,a,o,i,u,p){try{var h=t[u](p),d=h.value}catch(t){return void a(t)}h.done?r(d):Promise.resolve(d).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var u=t.apply(r,a);function _next(t){asyncGeneratorStep(u,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}var SPECIAL_SEARCHES=[],LAST_COUNTER_FOCUS=null;function initSpecialSearches(){return _initSpecialSearches.apply(this,arguments)}function _initSpecialSearches(){return _initSpecialSearches=_asyncToGenerator(_regeneratorRuntime().mark((function _callee30(){var _game$modules$get,NOTE_MATCHING,ROLL_MATCHING,TIMER_MATCHING,TRACKER_MATCHING,COUNTER_MATCHING,UNITS_MAPPING,UNITS,LIGHT_LOCALIZATION,parseTime,useMetricForLights,conversionRatio,lightEffects,getSplatterData;return _regeneratorRuntime().wrap((function _callee30$(_context30){for(;;)switch(_context30.prev=_context30.next){case 0:parseTime=function _parseTime3(t){var r=0,a=0,o=0,i=/(\d+)[\s:]+(\d+)[\s:]+(\d+)/,u=/(\d+)[\s:]+(\d+)/,p=/(\d+)\s*m/,h=/(\d+)\s*s/;if(i.test(t)){var d=t.match(i);r=parseInt(d[1]),a=parseInt(d[2]),o=parseInt(d[3])}else if(u.test(t)){var y=t.match(u);a=parseInt(y[1]),o=parseInt(y[2])}else if(p.test(t)){var v=t.match(p);a=parseInt(v[1])}else{if(!h.test(t)){var b=parseInt(t);return isNaN(b)||(o=b),{hours:r,minutes:a,seconds:o}}var w=t.match(h);o=parseInt(w[1])}return{hours:r,minutes:a,seconds:o}},SPECIAL_SEARCHES.length=0,NOTE_MATCHING=["notes","note:","notes:","n:","n ",game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.note.local-keyword"))],ROLL_MATCHING=["!roll","roll:","r:","r ",game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.roll.local-keyword"))],TIMER_MATCHING=["timer:","time","time:","t:","t ",game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.timer.local-keyword"))],TRACKER_MATCHING=["tracker:","t:","t ","track","track:","s:","s ","f:","f ",game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.tracker.local-keyword"))],COUNTER_MATCHING=["counter:","c:","c ","count","count:","c:","c ",game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.counter.local-keyword"))],UNITS_MAPPING={ft:function ft(t){return.3048*t+"m"},in:function _in(t){return 2.54*t+"cm"},yd:function yd(t){return.9144*t+"m"},mi:function mi(t){return 1.60934*t+"km"},lb:function lb(t){return.453592*t+"kg"},lbs:function lbs(t){return.453592*t+"kg"},oz:function oz(t){return 28.3495*t+"g"},gal:function gal(t){return 3.78541*t+"l"},pt:function pt(t){return 473.176*t+"ml"},"fl oz":function flOz(t){return 29.5735*t+"ml"},tbsp:function tbsp(t){return 14.7868*t+"ml"},f:function f(t){return 5*(t-32)/9+"c"},"°":function _(t){return 9*t/5+32+"f"},"°C":function C(t){return 9*t/5+32+"°F"},"°F":function F(t){return 5*(t-32)/9+"°C"},c:function c(t){return 9*t/5+32+"f"},m:function m(t){return 3.28084*t+"ft"},cm:function cm(t){return.393701*t+"in"},km:function km(t){return.621371*t+"mi"},kg:function kg(t){return 2.20462*t+"lb"},g:function g(t){return.035274*t+"oz"},l:function l(t){return.264172*t+"gal"},ml:function ml(t){return.00211338*t+"pt"}},UNITS=Object.keys(UNITS_MAPPING),LIGHT_LOCALIZATION=game.i18n.localize("Light"),SPECIAL_SEARCHES.push(new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(search){try{return"".concat(eval(search.query))}catch(_unused){for(var query=search.query;query.length>0&&isNaN(query[query.length-1]);)query=query.slice(0,-1);try{return"".concat(eval(query))}catch(t){return"..."}}},type:"special-app",data:{},img:"",icon:"fad fa-calculator",match:function match(t){return t&&t.match(/^[0-9\+\-\*\/\(\)\.\s]*$/)},onClick:function onClick(t){navigator.clipboard.writeText(this.name),ui.notifications.info(game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".notifications.calc-clipboard")))}}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(t){var r,a,o,i=t.query.replaceAll(" ",""),u=null===(r=i.match(/[\d.]+/))||void 0===r?void 0:r[0],p=null===(a=i.match(/[a-zA-Z°]+/))||void 0===a?void 0:a[0],h=null!==(o=UNITS.find((function(t){return p===t})))&&void 0!==o?o:UNITS.find((function(t){return p.includes(t)}));if(u&&h){var d,y,v=parseFloat(u),b=h,w=UNITS_MAPPING[b](v),E=null===(d=w.match(/[\d.]+/))||void 0===d?void 0:d[0],k=null===(y=w.match(/[a-zA-Z°]+/))||void 0===y?void 0:y[0];return E&&(E=parseFloat(E).toFixed(2)),'<div class="unit-converter-result"><span>'.concat(v," ").concat(b,'</span> <i class="fas fa-equals"></i> <span data-converted="').concat(E,'">').concat(E," ").concat(k,"</span></div>")}return"..."},type:"special-app",data:{},img:"",icon:"fad fa-calculator",match:function match(t){var r,a,o=null===(r=(t=t.replaceAll(" ","")).match(/[\d.]+/))||void 0===r?void 0:r[0],i=null===(a=t.match(/[a-zA-Z°]+/))||void 0===a?void 0:a[0];return o&&UNITS.includes(i)},onClick:function onClick(t,r){var a=document.createElement("div");a.innerHTML=r.name;var o=a.querySelector("span[data-converted]").dataset.converted;navigator.clipboard.writeText(o),ui.notifications.info(game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".notifications.calc-clipboard")))}}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.note.name"))},description:function description(t){return t.query.replace(/(note|notes|!note|!notes|note:|notes:|!n|n:)/i,"").trim()},type:"special-app",data:{},img:"",icon:"fad fa-sticky-note",match:function match(t){return NOTE_MATCHING.some((function(r){return t.startsWith(r)}))},onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){var r,a,o,i,u,p,h,d;return _regeneratorRuntime().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.description){t.next=3;break}return t.abrupt("return");case 3:if(o="Omnisearch Notes [".concat(game.user.name,"]"),i=game.journal.getName(o)){t.next=9;break}return t.next=8,JournalEntry.create({name:o});case 8:i=t.sent;case 9:if(u=(new Date).toLocaleDateString(),p=(new Date).toLocaleTimeString(),h=i.pages.getName(u)){t.next=17;break}return t.next=15,i.createEmbeddedDocuments("JournalEntryPage",[{name:u,type:"text"}]);case 15:h=(h=t.sent)[0];case 17:d=null!==(r=h.text.content)&&void 0!==r?r:"",h.update({"text.content":"".concat(d," <h3>").concat(p,":</h3><p>").concat(a,"</p>")}),ui.notifications.info(game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".notifications.note")));case 20:case"end":return t.stop()}}),_callee,this)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.roll.name"))},description:function description(t){return t.query.replace(/(roll|!roll|roll:|!r|r:|r )/i,"").trim()},type:"special-app",data:{},img:"",icon:"fad fa-dice-d20",match:function match(t){return ROLL_MATCHING.some((function(r){return t.startsWith(r)}))},onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:new Roll(this.description).toMessage();case 1:case"end":return t.stop()}}),_callee2,this)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.help.name"))},description:function description(t){var r=game.i18n.translations["spotlight-omnisearch"].special.help.list,a="<ul>".concat(r.map((function(t){return'<li style="pointer-events:none">'.concat(t,"</li>")})).join(""),"</ul>"),o=_buildTermIndex__WEBPACK_IMPORTED_MODULE_2__.Oq.map((function(t){return'<span class="filter" data-filter="'.concat(t,'">').concat(t,"</span>")})).join("");return"".concat(a,' <div class="filters-help">').concat(o,"</div>")},type:"special-app help",data:{},img:"",icon:"fad fa-question",match:function match(t){return t.includes("help")||t.startsWith("?")},onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){return _regeneratorRuntime().wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee3)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){var t=game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.timer.name")),r=(0,_settings__WEBPACK_IMPORTED_MODULE_1__.$8)("appData").timer;if(r){var a=r-Date.now();if(a>0){var o=Math.floor(a/36e5),i=Math.floor(a%36e5/6e4),u=Math.floor(a%6e4/1e3);u<10&&(u="0".concat(u)),t+='<hr><strong style="font-size: larger;">'.concat(o?"".concat(o,":"):"").concat(i?"".concat(i,":"):"").concat(u?"".concat(u):"","</strong>")}}else if(void 0!==r&&game.user.isGM){var p=(0,_settings__WEBPACK_IMPORTED_MODULE_1__.$8)("appData");delete p.timer,(0,_settings__WEBPACK_IMPORTED_MODULE_1__.Lt)("appData",p)}return t},description:function description(t){var r=t.query.replace(/(timer|timer:|time|time:|t:|t )/i,"").trim(),a=parseTime(r),o=a.hours,i=a.minutes,u=a.seconds;return"".concat(o?"".concat(o,"h "):"").concat(i?"".concat(i,"m "):"").concat(u?"".concat(u,"s"):"")},type:"special-app timer",data:{},img:"",icon:"fad fa-stopwatch",match:function match(t){return TIMER_MATCHING.some((function(r){return t.startsWith(r)}))},onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t){var r,a,o,i,u,p,h,d,y,v;return _regeneratorRuntime().wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:if(game.user.isGM){t.next=2;break}return t.abrupt("return",ui.notifications.error(game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".notifications.timer-gm"))));case 2:if(a=this.query.replace(/(timer|timer:|time|time:|t:|t )/i,"").trim(),o=parseTime(a),i=o.hours,u=o.minutes,p=o.seconds,!((h=3600*i+60*u+p)<=0)){t.next=7;break}return t.abrupt("return");case 7:return d=Date.now(),y=d+1e3*h,(v=(0,_settings__WEBPACK_IMPORTED_MODULE_1__.$8)("appData")).timer=y,t.next=13,(0,_settings__WEBPACK_IMPORTED_MODULE_1__.Lt)("appData",v);case 13:null===(r=ui.spotlightOmnisearch)||void 0===r||r._onSearch();case 14:case"end":return t.stop()}}),_callee4,this)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.tracker.name"))},type:"special-app",data:{},img:"",icon:"fad fa-check-circle",match:function match(t){return TRACKER_MATCHING.some((function(r){return t.startsWith(r)}))},onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t){return _regeneratorRuntime().wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee5)})));return function onClick(r){return t.apply(this,arguments)}}(),activateListeners:function activateListeners(t){var r=(0,_settings__WEBPACK_IMPORTED_MODULE_1__.$8)("appData");r.tracker||(r.tracker={success:2,fail:3});var a=r.tracker.success,o=r.tracker.fail,i=document.createElement("div");i.classList.add("tracker-container");for(var u=[],p=function _loop(t){var o=document.createElement("div");o.classList.add("tracker-dot","success"),t<a&&o.classList.add("checked"),u.push(o),o.addEventListener("click",_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(){var i;return _regeneratorRuntime().wrap((function _callee6$(p){for(;;)switch(p.prev=p.next){case 0:if(game.user.isGM){p.next=2;break}return p.abrupt("return",ui.notifications.error(game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".notifications.tracker-gm"))));case 2:if(o.classList.contains("checked")&&t===a-1)o.classList.remove("checked"),r.tracker.success--,a--;else{for(u.forEach((function(t){return t.classList.remove("checked")})),i=0;i<=t;i++)u[i].classList.add("checked");r.tracker.success=t+1,a=t+1}return p.next=6,(0,_settings__WEBPACK_IMPORTED_MODULE_1__.Lt)("appData",r);case 6:case"end":return p.stop()}}),_callee6)}))))},h=0;h<7;h++)p(h);u.reverse().forEach((function(t){return i.appendChild(t)})),u.reverse();var d=document.createElement("div");d.classList.add("tracker-slash"),d.innerHTML='<i class="fa-sharp fa-solid fa-slash-forward"></i>',i.appendChild(d);for(var y=[],v=function _loop2(t){var a=document.createElement("div");a.classList.add("tracker-dot","fail"),t<o&&a.classList.add("checked"),i.appendChild(a),y.push(a),a.addEventListener("click",_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(){var i;return _regeneratorRuntime().wrap((function _callee7$(u){for(;;)switch(u.prev=u.next){case 0:if(game.user.isGM){u.next=2;break}return u.abrupt("return",ui.notifications.error(game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".notifications.tracker-gm"))));case 2:if(a.classList.contains("checked")&&t===o-1)a.classList.remove("checked"),r.tracker.fail--,o--;else{for(y.forEach((function(t){return t.classList.remove("checked")})),i=0;i<=t;i++)y[i].classList.add("checked");r.tracker.fail=t+1,o=t+1}return u.next=6,(0,_settings__WEBPACK_IMPORTED_MODULE_1__.Lt)("appData",r);case 6:case"end":return u.stop()}}),_callee7)}))))},b=0;b<7;b++)v(b);t.querySelector(".search-info").appendChild(i)}}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.counter.name"))},type:"special-app",data:{},img:"",icon:"fad fa-plus-circle",match:function match(t){return COUNTER_MATCHING.some((function(r){return t.startsWith(r)}))},onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee8(t){return _regeneratorRuntime().wrap((function _callee8$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee8)})));return function onClick(r){return t.apply(this,arguments)}}(),activateListeners:function activateListeners(t){var r=(0,_settings__WEBPACK_IMPORTED_MODULE_1__.$8)("appData");r.counter||(r.counter=[0,0,0,0],(0,_settings__WEBPACK_IMPORTED_MODULE_1__.Lt)("appData",r));var a=[],o=document.createElement("div");o.classList.add("counter-container");for(var i=function _loop3(t){var o=document.createElement("input");o.type="number",o.value=r.counter[t]||0;var i=document.createElement("div");i.classList.add("counter-input-container"),i.appendChild(o);var u=document.createElement("div");u.classList.add("up-down-container");var p=document.createElement("i");p.classList.add("fas","fa-chevron-up"),p.addEventListener("click",_asyncToGenerator(_regeneratorRuntime().mark((function _callee9(){return _regeneratorRuntime().wrap((function _callee9$(a){for(;;)switch(a.prev=a.next){case 0:if(game.user.isGM){a.next=2;break}return a.abrupt("return",ui.notifications.error(game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".notifications.counter-gm"))));case 2:return o.value=parseInt(o.value)+1,r.counter[t]=o.value,a.next=6,(0,_settings__WEBPACK_IMPORTED_MODULE_1__.Lt)("appData",r);case 6:case"end":return a.stop()}}),_callee9)})))),u.appendChild(p);var h=document.createElement("i");h.classList.add("fas","fa-chevron-down"),h.addEventListener("click",_asyncToGenerator(_regeneratorRuntime().mark((function _callee10(){return _regeneratorRuntime().wrap((function _callee10$(a){for(;;)switch(a.prev=a.next){case 0:if(game.user.isGM){a.next=2;break}return a.abrupt("return",ui.notifications.error(game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".notifications.counter-gm"))));case 2:return o.value=parseInt(o.value)-1,r.counter[t]=o.value,a.next=6,(0,_settings__WEBPACK_IMPORTED_MODULE_1__.Lt)("appData",r);case 6:case"end":return a.stop()}}),_callee10)})))),u.appendChild(h),i.appendChild(u),a.push(i),o.addEventListener("keyup",_asyncToGenerator(_regeneratorRuntime().mark((function _callee11(){var a,i;return _regeneratorRuntime().wrap((function _callee11$(u){for(;;)switch(u.prev=u.next){case 0:if(game.user.isGM){u.next=2;break}return u.abrupt("return",ui.notifications.error(game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".notifications.counter-gm"))));case 2:return(i=(0,_settings__WEBPACK_IMPORTED_MODULE_1__.$8)("appData")).counter=null!==(a=i.counter)&&void 0!==a?a:[0,0,0,0],i.counter[t]=parseInt(o.value),LAST_COUNTER_FOCUS=t,u.next=8,(0,_settings__WEBPACK_IMPORTED_MODULE_1__.Lt)("appData",r);case 8:case"end":return u.stop()}}),_callee11)}))))},u=0;u<4;u++)i(u);a.forEach((function(t){return o.appendChild(t)})),t.querySelector(".search-info").appendChild(o)}}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(t){var r=t.query.replace(/(attr:|@)/i,"").trim();return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.attribute.name"))+": "+r},description:function description(t){var r=t.query.replace(/(attr:|@)/i,"").trim(),a=Array.from(new Set(game.users.map((function(t){return t.character})).concat(canvas.tokens.controlled.map((function(t){return t.actor}))).filter((function(t){return t&&t.isOwner})))).sort((function(t,r){return t.name.localeCompare(r.name)})),o=document.createElement("div"),i=document.createElement("ul");return o.appendChild(i),a.forEach((function(t){var a=document.createElement("li"),o=r?foundry.utils.getProperty(t.system,r):foundry.utils.getProperty(t,"system");if(void 0===o){var u,p=r.split(".").slice(0,-1).join(".");o=p?null!==(u=foundry.utils.getProperty(t.system,p))&&void 0!==u?u:"?":foundry.utils.getProperty(t,"system")}o="object"===_typeof(o)?Object.keys(o).map((function(t){return"<strong>".concat(t,"</strong>")})).join(", "):"<strong>".concat(o,"</strong>"),a.innerHTML='<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;width: 100%"><span>'.concat(t.name,"</span><span>").concat(o,"</span></div>"),i.appendChild(a)})),o.innerHTML},type:"special-app",data:{},img:"",icon:"fad fa-brackets-curly",match:function match(t){return t.startsWith("attr:")||t.startsWith("@")},onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee12(t){return _regeneratorRuntime().wrap((function _callee12$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee12)})));return function onClick(r){return t.apply(this,arguments)}}()})),useMetricForLights=(0,_settings__WEBPACK_IMPORTED_MODULE_1__.$8)("useMetricForLights"),conversionRatio=useMetricForLights?.3048:1,lightEffects=[new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.torch"))},description:function description(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.info"))},img:"icons/sundries/lights/torch-black.webp",icon:["fas fa-fire-flame","fas fa-sun"],type:LIGHT_LOCALIZATION,onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee13(t){var r;return _regeneratorRuntime().wrap((function _callee13$(t){for(;;)switch(t.prev=t.next){case 0:r=canvas.tokens.controlled.map((function(t){return{_id:t.document.id,light:{alpha:.5,angle:360,bright:20,coloration:1,dim:40,luminosity:.5,saturation:0,contrast:0,shadows:0,animation:{speed:5,intensity:5,reverse:!1,type:"torch"},darkness:{min:0,max:1},color:"#fea50b",attenuation:.5}}})),canvas.scene.updateEmbeddedDocuments("Token",r);case 2:case"end":return t.stop()}}),_callee13)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.candle"))},description:function description(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.info"))},img:"icons/sundries/lights/candle-lit-yellow.webp",icon:["fas fa-fire-flame","fas fa-sun"],type:LIGHT_LOCALIZATION,onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee14(t){var r;return _regeneratorRuntime().wrap((function _callee14$(t){for(;;)switch(t.prev=t.next){case 0:r=canvas.tokens.controlled.map((function(t){return{_id:t.document.id,light:{alpha:.5,angle:360,bright:5*conversionRatio,coloration:1,dim:10*conversionRatio,luminosity:.5,saturation:0,contrast:0,shadows:0,animation:{speed:5,intensity:5,reverse:!1,type:"torch"},darkness:{min:0,max:1},color:"#fea50b",attenuation:.5}}})),canvas.scene.updateEmbeddedDocuments("Token",r);case 2:case"end":return t.stop()}}),_callee14)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.lantern"))},description:function description(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.info"))},img:"icons/sundries/lights/lantern-iron-yellow.webp",icon:["fas fa-fire-flame","fas fa-sun"],type:LIGHT_LOCALIZATION,onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee15(t){var r;return _regeneratorRuntime().wrap((function _callee15$(t){for(;;)switch(t.prev=t.next){case 0:r=canvas.tokens.controlled.map((function(t){return{_id:t.document.id,light:{alpha:.5,angle:360,bright:30*conversionRatio,coloration:1,dim:60*conversionRatio,luminosity:.5,saturation:0,contrast:0,shadows:0,animation:{speed:5,intensity:5,reverse:!1,type:"torch"},darkness:{min:0,max:1},color:"#fea50b",attenuation:.5}}})),canvas.scene.updateEmbeddedDocuments("Token",r);case 2:case"end":return t.stop()}}),_callee15)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.lantern-shut"))},description:function description(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.info"))},img:"icons/sundries/lights/lantern-steel.webp",icon:["fas fa-fire-flame","fas fa-sun"],type:LIGHT_LOCALIZATION,onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee16(t){var r;return _regeneratorRuntime().wrap((function _callee16$(t){for(;;)switch(t.prev=t.next){case 0:r=canvas.tokens.controlled.map((function(t){return{_id:t.document.id,light:{alpha:.5,angle:360,bright:0,coloration:1,dim:5*conversionRatio,luminosity:.5,saturation:0,contrast:0,shadows:0,animation:{speed:5,intensity:5,reverse:!1,type:"torch"},darkness:{min:0,max:1},color:"#fea50b",attenuation:.5}}})),canvas.scene.updateEmbeddedDocuments("Token",r);case 2:case"end":return t.stop()}}),_callee16)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.magical"))},description:function description(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.info"))},img:"icons/magic/light/explosion-star-glow-blue.webp",icon:["fas fa-fire-flame","fas fa-sun"],type:LIGHT_LOCALIZATION,onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee17(t){var r;return _regeneratorRuntime().wrap((function _callee17$(t){for(;;)switch(t.prev=t.next){case 0:r=canvas.tokens.controlled.map((function(t){return{_id:t.document.id,light:{alpha:.5,angle:360,bright:20*conversionRatio,coloration:1,dim:20*conversionRatio,luminosity:.5,saturation:0,contrast:0,shadows:0,animation:{speed:2,intensity:5,reverse:!1,type:"torch"},darkness:{min:0,max:1},color:"#b3f0ff",attenuation:.5}}})),canvas.scene.updateEmbeddedDocuments("Token",r);case 2:case"end":return t.stop()}}),_callee17)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.flashlight"))},description:function description(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.info"))},img:"icons/magic/light/orb-lightbulb-gray.webp",icon:["fas fa-fire-flame","fas fa-sun"],type:LIGHT_LOCALIZATION,onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee18(t){var r;return _regeneratorRuntime().wrap((function _callee18$(t){for(;;)switch(t.prev=t.next){case 0:r=canvas.tokens.controlled.map((function(t){return{_id:t.document.id,light:{alpha:.5,angle:90,bright:20*conversionRatio,coloration:1,dim:20*conversionRatio,luminosity:.5,saturation:0,contrast:0,shadows:0,animation:{speed:2,intensity:2,reverse:!1,type:null},darkness:{min:0,max:1},color:"#ffffff",attenuation:.5}}})),canvas.scene.updateEmbeddedDocuments("Token",r);case 2:case"end":return t.stop()}}),_callee18)})));return function onClick(r){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:function name(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.off"))},description:function description(){return game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.light.info"))},img:"icons/svg/light-off.svg",icon:["fas fa-fire-flame","fas fa-sun"],type:LIGHT_LOCALIZATION,onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee19(t){var r;return _regeneratorRuntime().wrap((function _callee19$(t){for(;;)switch(t.prev=t.next){case 0:r=canvas.tokens.controlled.map((function(t){return{_id:t.document.id,light:{bright:0,dim:0}}})),canvas.scene.updateEmbeddedDocuments("Token",r);case 2:case"end":return t.stop()}}),_callee19)})));return function onClick(r){return t.apply(this,arguments)}}()})],SPECIAL_SEARCHES.push.apply(SPECIAL_SEARCHES,lightEffects),SPECIAL_SEARCHES.push(new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:game.i18n.localize("SCENES.Darkness"),description:"",keywords:[],actions:[{name:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.darkness.night")),icon:'<i class="fas fa-moon"></i>',callback:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee20(){return _regeneratorRuntime().wrap((function _callee20$(t){for(;;)switch(t.prev=t.next){case 0:canvas.scene.update({darkness:1},{animateDarkness:1e4});case 1:case"end":return t.stop()}}),_callee20)})));return function callback(){return t.apply(this,arguments)}}()},{name:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.darkness.dawn")),icon:'<i class="fas fa-sunrise"></i>',callback:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee21(){return _regeneratorRuntime().wrap((function _callee21$(t){for(;;)switch(t.prev=t.next){case 0:canvas.scene.update({darkness:.3},{animateDarkness:1e4});case 1:case"end":return t.stop()}}),_callee21)})));return function callback(){return t.apply(this,arguments)}}()},{name:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.darkness.day")),icon:'<i class="fas fa-sun"></i>',callback:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee22(){return _regeneratorRuntime().wrap((function _callee22$(t){for(;;)switch(t.prev=t.next){case 0:canvas.scene.update({darkness:0},{animateDarkness:1e4});case 1:case"end":return t.stop()}}),_callee22)})));return function callback(){return t.apply(this,arguments)}}()},{name:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.darkness.dusk")),icon:'<i class="fas fa-sunset"></i>',callback:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee23(){return _regeneratorRuntime().wrap((function _callee23$(t){for(;;)switch(t.prev=t.next){case 0:canvas.scene.update({darkness:.7},{animateDarkness:1e4});case 1:case"end":return t.stop()}}),_callee23)})));return function callback(){return t.apply(this,arguments)}}()}],type:game.i18n.localize("SCENES.Darkness"),data:{},img:null,icon:["fas fa-moon-over-sun"],onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee24(){return _regeneratorRuntime().wrap((function _callee24$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee24)})));return function onClick(){return t.apply(this,arguments)}}()})),null!==(_game$modules$get=game.modules.get("splatter"))&&void 0!==_game$modules$get&&_game$modules$get.active&&(getSplatterData=function getSplatterData(t){var r=game.settings.get("splatter","maxHp"),a=game.settings.get("splatter","currentHp"),o=game.settings.get("splatter","useWounds"),i=foundry.utils.getProperty(t.system,a),u=foundry.utils.getProperty(t.system,r),p="system.".concat(a);return{heal:function heal(r){var a=o?i-r:i+r;t.update(_defineProperty({},p,a))},damage:function damage(r){var a=o?i+r:i-r;t.update(_defineProperty({},p,a))},kill:function kill(){o?t.update(_defineProperty({},p,u)):t.update(_defineProperty({},p,0))},restore:function restore(){o?t.update(_defineProperty({},p,0)):t.update(_defineProperty({},p,u))}}},SPECIAL_SEARCHES.push(new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.kill.name")),description:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.kill.description")),keywords:[],type:"special-app",data:{},img:null,icon:["fas fa-skull-crossbones"],onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee25(){return _regeneratorRuntime().wrap((function _callee25$(t){for(;;)switch(t.prev=t.next){case 0:canvas.tokens.controlled.map((function(t){return t.actor})).forEach((function(t){getSplatterData(t).kill()}));case 2:case"end":return t.stop()}}),_callee25)})));return function onClick(){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.restore.name")),description:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.restore.description")),keywords:[],type:"special-app",data:{},img:null,icon:["fas fa-heart"],onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee26(){return _regeneratorRuntime().wrap((function _callee26$(t){for(;;)switch(t.prev=t.next){case 0:canvas.tokens.controlled.map((function(t){return t.actor})).forEach((function(t){getSplatterData(t).restore()}));case 2:case"end":return t.stop()}}),_callee26)})));return function onClick(){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.damage.name")),description:function description(t){var r=t.query.match(/-?\d+/);return r?parseInt(r[0]):0},keywords:[],type:"special-app",data:{},img:null,icon:["fas fa-sword"],match:function match(t){return t=t.replace(/-?\d+/g,"").trim(),this.name.toLowerCase().includes(t)},onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee27(t,r){var a,o,i,u;return _regeneratorRuntime().wrap((function _callee27$(t){for(;;)switch(t.prev=t.next){case 0:i=canvas.tokens.controlled.map((function(t){return t.actor})),u=parseInt(null!==(a=null===(o=r.query.match(/-?\d+/))||void 0===o?void 0:o[0])&&void 0!==a?a:0),i.forEach((function(t){getSplatterData(t).damage(u)}));case 3:case"end":return t.stop()}}),_callee27)})));return function onClick(r,a){return t.apply(this,arguments)}}()}),new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.heal.name")),description:function description(t){var r=t.query.match(/-?\d+/);return r?parseInt(r[0]):0},keywords:[],type:"special-app",data:{},img:null,icon:["fas fa-plus"],match:function match(t){return t=t.replace(/-?\d+/g,"").trim(),this.name.toLowerCase().includes(t)},onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee28(t,r){var a,o,i,u;return _regeneratorRuntime().wrap((function _callee28$(t){for(;;)switch(t.prev=t.next){case 0:i=canvas.tokens.controlled.map((function(t){return t.actor})),u=parseInt(null!==(a=null===(o=r.query.match(/-?\d+/))||void 0===o?void 0:o[0])&&void 0!==a?a:0),i.forEach((function(t){getSplatterData(t).heal(u)}));case 3:case"end":return t.stop()}}),_callee28)})));return function onClick(r,a){return t.apply(this,arguments)}}()}))),SPECIAL_SEARCHES.push(new _baseSearchTerm__WEBPACK_IMPORTED_MODULE_3__.C({name:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.reindex.name")),description:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.reindex.description")),keywords:[],type:game.i18n.localize("".concat(_main__WEBPACK_IMPORTED_MODULE_0__.c,".special.reindex.name")),data:{},img:null,icon:["fas fa-search"],onClick:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee29(){return _regeneratorRuntime().wrap((function _callee29$(t){for(;;)switch(t.prev=t.next){case 0:CONFIG.SpotlightOmniseach.rebuildIndex();case 1:case"end":return t.stop()}}),_callee29)})));return function onClick(){return t.apply(this,arguments)}}()}));case 18:case"end":return _context30.stop()}}),_callee30)}))),_initSpecialSearches.apply(this,arguments)}},83:(t,r,a)=>{a.d(r,{$8:()=>getSetting,Lt:()=>setSetting,Yq:()=>registerSettings});var o=a(97),i=a(91);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(t,r,a){t[r]=a.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",p=i.asyncIterator||"@@asyncIterator",h=i.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var u=r&&r.prototype instanceof Generator?r:Generator,p=Object.create(u.prototype),h=new Context(i||[]);return o(p,"_invoke",{value:makeInvokeMethod(t,a,h)}),p}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var y={};define(y,u,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(values([])));b&&b!==r&&a.call(b,u)&&(y=b);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(o,i,u,p){var h=tryCatch(t[o],t,i);if("throw"!==h.type){var d=h.arg,y=d.value;return y&&"object"==_typeof(y)&&a.call(y,"__await")?r.resolve(y.__await).then((function(t){invoke("next",t,u,p)}),(function(t){invoke("throw",t,u,p)})):r.resolve(y).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,p)}))}p(h.arg)}var i;o(this,"_invoke",{value:function value(t,a){function callInvokeWithMethodAndArg(){return new r((function(r,o){invoke(t,a,r,o)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,a){var o="suspendedStart";return function(i,u){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw u;return doneResult()}for(a.method=i,a.arg=u;;){var p=a.delegate;if(p){var h=maybeInvokeDelegate(p,a);if(h){if(h===d)continue;return h}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===o)throw o="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o="executing";var y=tryCatch(t,r,a);if("normal"===y.type){if(o=a.done?"completed":"suspendedYield",y.arg===d)continue;return{value:y.arg,done:a.done}}"throw"===y.type&&(o="completed",a.method="throw",a.arg=y.arg)}}}function maybeInvokeDelegate(t,r){var a=r.method,o=t.iterator[a];if(void 0===o)return r.delegate=null,"throw"===a&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var i=tryCatch(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var u=i.arg;return u?u.done?(r[t.resultName]=u.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,d):u:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function next(){for(;++o<t.length;)if(a.call(t,o))return next.value=t[o],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(w,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,h,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,p,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,a,o,i,u){void 0===u&&(u=Promise);var p=new AsyncIterator(wrap(r,a,o,i),u);return t.isGeneratorFunction(a)?p:p.next().then((function(t){return t.done?t.value:p.next()}))},defineIteratorMethods(w),define(w,h,"Generator"),define(w,u,(function(){return this})),define(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),a=[];for(var o in r)a.push(o);return a.reverse(),function next(){for(;a.length;){var t=a.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(a,o){return u.type="throw",u.arg=t,r.next=a,o&&(r.method="next",r.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var p=a.call(i,"catchLoc"),h=a.call(i,"finallyLoc");if(p&&h){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(p){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var u=i;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var p=u?u.completion:{};return p.type=t,p.arg=r,u?(this.method="next",this.next=u.finallyLoc,d):this.complete(p)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),d}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var o=a.completion;if("throw"===o.type){var i=o.arg;resetTryEntry(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,a){return this.delegate={iterator:values(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var o,i,u,p,h=[],d=!0,y=!1;try{if(u=(a=a.call(t)).next,0===r){if(Object(a)!==a)return;d=!1}else for(;!(d=(o=u.call(a)).done)&&(h.push(o.value),h.length!==r);d=!0);}catch(t){y=!0,i=t}finally{try{if(!d&&null!=a.return&&(p=a.return(),Object(p)!==p))return}finally{if(y)throw i}}return h}}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function asyncGeneratorStep(t,r,a,o,i,u,p){try{var h=t[u](p),d=h.value}catch(t){return void a(t)}h.done?r(d):Promise.resolve(d).then(o,i)}function registerSettings(){!function registerSettingsArray(t){for(var r=0,a=Object.entries(t);r<a.length;r++){var i=_slicedToArray(a[r],2),u=i[0],p=i[1];game.settings.register(o.c,u,p)}}({gmOnly:{name:"".concat(o.c,".settings.gmOnly.name"),hint:"".concat(o.c,".settings.gmOnly.hint"),scope:"world",config:!0,default:!1,type:Boolean},darkMode:{name:"".concat(o.c,".settings.darkMode.name"),hint:"".concat(o.c,".settings.darkMode.hint"),scope:"world",config:!0,default:!1,type:Boolean,onChange:function onChange(t){var r;return null===(r=ui.spotlightOmnisearch)||void 0===r?void 0:r._html.closest("#spotlight").classList.toggle("dark",t)}},compactMode:{name:"".concat(o.c,".settings.compactMode.name"),hint:"".concat(o.c,".settings.compactMode.hint"),scope:"client",config:!0,default:!1,type:Boolean,onChange:function onChange(t){var r;return null===(r=ui.spotlightOmnisearch)||void 0===r?void 0:r._html.closest("#spotlight").classList.toggle("compact",t)}},clickToDismiss:{name:"".concat(o.c,".settings.clickToDismiss.name"),hint:"".concat(o.c,".settings.clickToDismiss.hint"),scope:"client",config:!0,default:!1,type:Boolean},saveLastSearch:{name:"".concat(o.c,".settings.saveLastSearch.name"),hint:"".concat(o.c,".settings.saveLastSearch.hint"),scope:"client",config:!0,default:!1,type:Boolean},position:{name:"".concat(o.c,".settings.position.name"),hint:"".concat(o.c,".settings.position.hint"),scope:"client",config:!0,default:"save",type:String,choices:{default:"".concat(o.c,".settings.position.choices.default"),save:"".concat(o.c,".settings.position.choices.save")}},alwaysOnTop:{name:"".concat(o.c,".settings.alwaysOnTop.name"),hint:"".concat(o.c,".settings.alwaysOnTop.hint"),scope:"client",config:!0,default:!1,type:Boolean},enableCtrlSpace:{name:"".concat(o.c,".settings.enableCtrlSpace.name"),hint:"".concat(o.c,".settings.enableCtrlSpace.hint"),scope:"client",config:!0,default:!0,type:Boolean},spotlightWidth:{name:"".concat(o.c,".settings.spotlightWidth.name"),hint:"".concat(o.c,".settings.spotlightWidth.hint"),scope:"world",config:!0,default:700,type:Number,range:{min:400,max:1e3,step:50}},showImages:{name:"".concat(o.c,".settings.showImages.name"),hint:"".concat(o.c,".settings.showImages.hint"),scope:"world",config:!0,default:!0,type:Boolean},searchFiles:{name:"".concat(o.c,".settings.searchFiles.name"),hint:"".concat(o.c,".settings.searchFiles.hint"),scope:"world",config:!0,default:!1,type:Boolean},searchSettings:{name:"".concat(o.c,".settings.searchSettings.name"),hint:"".concat(o.c,".settings.searchSettings.hint"),scope:"world",config:!0,default:!0,type:Boolean},searchCompendium:{name:"".concat(o.c,".settings.searchCompendium.name"),hint:"".concat(o.c,".settings.searchCompendium.hint"),scope:"world",config:!0,default:!0,type:Boolean},searchSidebar:{name:"".concat(o.c,".settings.searchSidebar.name"),hint:"".concat(o.c,".settings.searchSidebar.hint"),scope:"world",config:!0,default:!0,type:Boolean},searchUtils:{name:"".concat(o.c,".settings.searchUtils.name"),hint:"".concat(o.c,".settings.searchUtils.hint"),scope:"world",config:!0,default:!0,type:Boolean},useMetricForLights:{name:"".concat(o.c,".settings.useMetricForLights.name"),hint:"".concat(o.c,".settings.useMetricForLights.hint"),scope:"world",config:!0,default:!1,type:Boolean},spotlightPosition:{scope:"client",config:!1,default:null,type:Object},firstTime:{scope:"client",config:!1,default:!0,type:Boolean},appData:{scope:"world",config:!1,default:{},type:Object,onChange:function onChange(t){var r;null!==(r=ui.spotlightOmnisearch)&&void 0!==r&&r.rendered&&("counter"in t&&game.user.isGM||ui.spotlightOmnisearch._onSearch()),(0,i.Q)()}}})}function getSetting(t){return game.settings.get(o.c,t)}function setSetting(t,r){return _setSetting.apply(this,arguments)}function _setSetting(){return _setSetting=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var u=t.apply(r,a);function _next(t){asyncGeneratorStep(u,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(t,r){return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,game.settings.set(o.c,t,r);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),_callee)}))),_setSetting.apply(this,arguments)}},91:(t,r,a)=>{a.d(r,{Q:()=>updateTimerInterval});var o=a(97),i=a(83),u=null;function updateTimerInterval(){if(game.user.isGM){clearInterval(u);var t=(0,i.$8)("appData").timer;t&&(u=setInterval((function(){if(console.log("Updating timer interval"),Date.now()>t)return clearInterval(u),void ChatMessage.create({content:game.i18n.localize("".concat(o.c,".special.timer.expired")),speaker:{alias:"Timer"},whisper:ChatMessage.getWhisperRecipients("GM")})}),1e3))}}}},__webpack_module_cache__={};function __webpack_require__(t){var r=__webpack_module_cache__[t];if(void 0!==r)return r.exports;var a=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](a,a.exports,__webpack_require__),a.exports}__webpack_require__.d=(t,r)=>{for(var a in r)__webpack_require__.o(r,a)&&!__webpack_require__.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},__webpack_require__.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r);var __webpack_exports__=__webpack_require__(97)})();
//# sourceMappingURL=index.js.map